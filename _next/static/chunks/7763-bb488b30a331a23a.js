"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7763],{7763:function(e,t,r){r.r(t),r.d(t,{ACTION_COLOR_MAP:function(){return J},AdvancedTradingView:function(){return Y},BE_API_KEY:function(){return b},BirdeyePriceSubscriber:function(){return v},CHAOS_ENDPOINT_BASE_URL:function(){return I},CHAOS_IDS:function(){return N},CHAOS_SUBSCRIPTION_MESSAGE:function(){return A},CHAOS_WEBSOCKET_URL:function(){return k},chaosWebsocket:function(){return x},dissectFromToAddress:function(){return B},getChannelString:function(){return D},getFromToAddress:function(){return T},getNextBarTime:function(){return p},makeApiRequest:function(){return m},parseResolution:function(){return _},subscribeOnStream:function(){return R},unsubscribeFromStream:function(){return j}});var s=r(25387),n=(r(72949),r(70402)),o=(r(97457),r(40871)),i=r(45642),a=r(56155),c=r(93981),l=r(13838),u=r(79989),d=r(29541),h=r(3872),f=r(11805),b="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE2NzI5MDEwNzZ9.c66gFnI20ymHoPWapB0JgISzqDIK6Q_Zg0oAVp8Ssyc";function m(e){return(0,a.Cr)(this,null,(function*(){try{return(yield fetch(`https://public-api.birdeye.so/${e}`,{headers:{"X-API-KEY":b}})).json()}catch(t){throw new Error(`Birdeye request error: ${t.status}`)}}))}var g={1:"1m",3:"3m",5:"5m",15:"15m",30:"30m",60:"1H",120:"2H",240:"4H","1D":"1D","1W":"1W"};function _(e){return e&&g[e]?g[e]:g[1]}function p(e,t="1D"){if(!e)return;const r=parseInt(t.slice(0,-1),10);let s;switch(t.slice(-1)){case"W":s=6048e5*r+e.time;break;case"D":s=864e5*r+e.time;break;case"H":s=36e5*r+e.time;break;case"m":s=6e4*r+e.time;break;default:throw new Error("Unhandle resolution in getNextBarTime")}return s}var y=class e{constructor(){this.debug=!1,this.isLoading=!1,this.channelToSubscription=new Map}setDebug(e){this.debug=e}getNewSocket(t=2){return(0,a.Cr)(this,null,(function*(){return e.socket=new WebSocket(`wss://public-api.birdeye.so/socket?x-api-key=${b}`,"echo-protocol"),new Promise(((r,s)=>(0,a.Cr)(this,null,(function*(){let n=5;for(;n>0;){if(yield(0,i.gw)(500),e.socket&&e.socket.readyState===e.socket.OPEN)return r(e.socket);n--}if(t>0){const e=yield this.getNewSocket(t-1);if(e instanceof WebSocket)return r(e)}s({status:"error"})}))))}))}subscribeOnStream(e,t,r,s,n,o,i,c){return(0,a.Cr)(this,null,(function*(){const o={id:n,callback:s};let l=this.channelToSubscription.get(i);if(l)return void l.handlers.push(o);const u=yield this.getNewSocket();if(!(u instanceof WebSocket))throw new Error("Failed to init WebSocket connection to Birdeye");l={subscriberUID:n,resolution:r,lastBar:c,handlers:[o],socket:u},this.channelToSubscription.set(i,l),this.debug&&console.log("[subscribeBars]: Subscribe to streaming. Channel:",i);const d={type:"SUBSCRIBE_BASE_QUOTE_PRICE",data:{chartType:r,baseAddress:e.address,quoteAddress:t.address}};l.socket.send(JSON.stringify(d)),l.socket.addEventListener("message",(e=>{const t=JSON.parse(e.data);if("BASE_QUOTE_PRICE_DATA"!==t.type)return;const s=this.channelToSubscription.get(i);if(void 0===s)return;const n=s.lastBar;if(!n)return;const o=1e3*t.data.unixTime,c=p(n,r);let l=null;if(c&&o>=c)l={time:c,open:t.data.o,high:t.data.h,low:t.data.l,close:t.data.c,volume:t.data.v},this.debug&&console.log("[socket] Generate new bar",l);else{const e=t.data.h,r=t.data.l,s=t.data.c,o=t.data.v;l=(0,a.EZ)((0,a.ih)({},n),{high:Math.max(n.high,e),low:Math.min(n.low,r),close:s,volume:o}),this.debug&&console.log("[socket] Update the latest bar by price",s)}l&&!this.isLoading&&(s.lastBar=l,s.handlers.forEach((e=>e.callback(l))))}))}))}unsubscribeFromStream(e){for(const t of this.channelToSubscription.keys()){const r=this.channelToSubscription.get(t);if(!r)return;const s=r.handlers.findIndex((t=>t.id===e));if(-1!==s){r.handlers.splice(s,1),this.debug&&console.log("[unsubscribeBars]: Unsubscribe from streaming. Channel:",t);const e={type:"UNSUBSCRIBE_BASE_QUOTE_PRICE"};r.socket.send(JSON.stringify(e)),r.socket.close(),this.channelToSubscription.delete(t);break}}}};y.socket=null;var v=y,C=new Map,E={supported_resolutions:["1","3","5","15","30","60","120","240","1D","1W"],exchanges:[]};function T(e,t){return`address:${e}/${t}`}function B(e){return e.replace("address:","").split("/")}function D(e,t,r){return`0~${e}~${t}~${r}`}var w=function(e,t){const r=new v;return{onReady:e=>{t&&console.log("[onReady]: Method call"),setTimeout((()=>e(E)))},searchSymbols:(e,t,r,s)=>(0,a.Cr)(this,null,(function*(){})),resolveSymbol:(t,r,s,n)=>(0,a.Cr)(this,null,(function*(){const[s,n]=B(t),[o,i]=[e(s),e(n)],c=`${null==o?void 0:o.address}/${null==i?void 0:i.address}`,l={address:t,ticker:c,name:c,description:c,type:"",session:"24x7",timezone:"Etc/UTC",minmov:1,pricescale:(0,a.f3)(10,16),has_intraday:!0,has_no_volume:!0,visible_plots_set:"ohlc",has_weekly_and_monthly:!1,supported_resolutions:E.supported_resolutions,volume_precision:2,data_status:"streaming",full_name:c,exchange:"",listed_exchange:"",format:"price"};r(l)})),getBars:(r,s,n,o,i)=>(0,a.Cr)(this,null,(function*(){const{from:c,to:l,firstDataRequest:u}=n;t&&console.log("[getBars]: Method call",{symbolInfo:r,resolution:s,time_from:c,time_to:l});const[d,h]=B(r.address),[f,b]=[e(d),e(h)];if(!f||!b)throw new Error("Token info not found");const g=new URLSearchParams({base_address:f.address,quote_address:b.address,type:_(s),time_from:String(c),time_to:String(l)});try{const e=yield m(`defi/ohlcv/base_quote?${g.toString()}`);if(!e.success||0===e.data.items.length)return void o([],{noData:!0});let r=[];e.data.items.forEach((e=>{e.unixTime>=c&&e.unixTime<l&&r.push({time:1e3*e.unixTime,low:e.l,high:e.h,open:e.o,close:e.c,volume:e.vBase})}));const n=D(f.address,b.address,s);u&&C.set(n,(0,a.ih)({},r[r.length-1])),t&&console.log(`[getBars]: returned ${r.length} bar(s)`),o(r,{noData:!1})}catch(p){t&&console.log("[getBars]: Get error",p),i(String(p))}})),subscribeBars:(s,n,o,i,a)=>{t&&console.log("[subscribeBars]: Method call with subscriberUID:",i),t&&r.setDebug(t);const[c,l]=B(s.address),[u,d]=[e(c),e(l)];if(!u||!d)throw new Error("Token info not found");const h=D(u.address,d.address,n);r.channelToSubscription.get(h)||(r.isLoading=!0),r.subscribeOnStream(u,d,_(n),o,i,a,h,C.get(h))},unsubscribeBars:e=>{t&&console.log("[unsubscribeBars]",e),r.unsubscribeFromStream(e),r.isLoading=!1}}};var S=({value:e,maxSuffix:t})=>{const[r,s,n]=((e,t=6)=>{if(0===e)return[0,"0","0"];const r=l.Z.ceil(new l.Z(-1).mul(l.Z.log10(l.Z.abs(e)))).toNumber();if(new l.Z(e).gte(1e-4)){const[t,r]=new l.Z(e).toSignificantDigits(4).toFixed().split(".");return[0,t||"",r||""]}const s=new l.Z(e).toFixed().slice(0,r+2),n=new l.Z(e).toFixed().slice(1+r).slice(0,t);return[r,s,n]})(e);return new l.Z(e).gte(1e-4)?e.toFixed(n.length):"0.0"+function(e){const t=["\u2080","\u2081","\u2082","\u2083","\u2084","\u2085","\u2086","\u2087","\u2088","\u2089"],r=e.toString();let s="";for(let n=0;n<r.length;n++){const e=t[parseInt(r.charAt(n),10)];e&&(s+=e)}return s}(r-1)+n.slice(0,t)},k="wss://history.oraclesecurity.org/trading-view/stream",I="https://history.oraclesecurity.org",A={a:"subscribe",ch:["btcusd","ethusd","solusd"]},N={So11111111111111111111111111111111111111112:"SOLUSD","7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs":"ETHUSD","3NZ9JMVBmGAqocybic2c7LQCJScmgsAZ6vQqTDzcqmJh":"BTCUSD"},P={1:"1",2:"2",5:"5",15:"15",30:"30",60:"1H",120:"2H",240:"4H",360:"6H",720:"12H","1D":"1D","1M":"1M"},U=e=>e&&P[e]?P[e]:P[1];function V(e){return new Promise((t=>setTimeout(t,e)))}var x=new class{constructor(){this.channelToSubscription=new Map}createSocket(e=2){return(0,a.Cr)(this,null,(function*(){return this.socket=this.socket?this.socket:new WebSocket(k),new Promise(((t,r)=>(0,a.Cr)(this,null,(function*(){let s=5;for(;s>0;){if(yield V(500),this.socket&&this.socket.readyState===this.socket.OPEN)return t(this.socket);s--}if(e>0){const r=yield this.createSocket(e-1);if(r instanceof WebSocket)return t(r)}r({status:"error"})}))))}))}closeSocket(){return(0,a.Cr)(this,null,(function*(){this.socket&&(this.socket.close(),this.socket=void 0)}))}subscribeOnStream(e,t,r,s,o,i){return(0,a.Cr)(this,null,(function*(){const o=`0~${e.name}~${t}`,c={id:s,callback:r};let l=this.channelToSubscription.get(o);l={subscriberUID:s,resolution:t,lastBar:i,handlers:[c],unsubscribePrice:()=>{}},this.channelToSubscription.set(o,l);const u=(0,n.o_)(e.name),d=n.e_.sub(u,(()=>{const r=n.e_.get(u);if(r){const{price:s,time:n}=r,o=`0~${e.name}~${t}`,i=this.channelToSubscription.get(o);if(void 0===i)return;const c=i.lastBar,l=function(e,t){let r;r="D"===t.slice(-1)?864e5+e.time:60*Number(t)*1e3+e.time;return r}(c,t);let u;n>=l?(u={time:l,open:c.close,high:s,low:s,close:s},"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.log("[socket] Generate new bar",u)):(u=(0,a.EZ)((0,a.ih)({},c),{high:Math.max(c.high,s),low:Math.min(c.low,s),close:s}),"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.log("[socket] Update the latest bar by price",s)),i.lastBar=u,i.handlers.forEach((e=>e.callback(u)))}}));l.unsubscribePrice=d}))}unsubscribeFromStream(e){return(0,a.Cr)(this,null,(function*(){for(const t of this.channelToSubscription.keys()){const r=this.channelToSubscription.get(t);null==r||r.unsubscribePrice();if(-1!==(null==r?void 0:r.handlers.findIndex((t=>t.id===e)))){"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.log("[unsubscribeBars]: Unsubscribe from streaming. Channel:",t),this.channelToSubscription.delete(t);break}}}))}},L={supported_resolutions:["1","5","15","30","60","120","240","360","720","1D","1M"]},M=new Map,$=()=>({onReady:e=>{"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[onReady]: Method call"),setTimeout((()=>e(L)))},searchSymbols:()=>(0,a.Cr)(void 0,null,(function*(){"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[searchSymbols]: Method call")})),resolveSymbol:(e,t)=>(0,a.Cr)(void 0,null,(function*(){"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[resolveSymbol]: Method call",e),t({name:e,ticker:e,description:e,type:"",session:"24x7",timezone:"Etc/UTC",minmov:1,pricescale:(0,a.f3)(10,2),has_intraday:!0,has_no_volume:!0,visible_plots_set:"ohlc",has_weekly_and_monthly:!0,supported_resolutions:L.supported_resolutions,volume_precision:2,data_status:"streaming",full_name:e,exchange:"Chaos",listed_exchange:"",format:"price"})})),getBars:(e,t,r,s,n)=>(0,a.Cr)(void 0,null,(function*(){const{from:o,to:i,firstDataRequest:c}=r;"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.log("[getBars]: Method call",e,t,r);const l=new URLSearchParams({feed:e.name,type:U(t),from:(1e3*o).toString(),till:(1e3*i).toString()});try{const r=yield fetch(`${I}/trading-view/data?${l.toString()}`);if("1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.log("[getBars]: Get Chaos Historical Data",r.json()),!r.ok)return void s([],{noData:!0});const n=yield r.json();if(!n.result||!n.result.length)return void s([],{noData:!0});let u=[];n.result.forEach((e=>{e.time>=1e3*o&&e.time<1e3*i&&(u=[...u,{time:e.time,low:e.low,high:e.high,open:e.open,close:e.close}])})),c&&M.set(e.ticker+t,(0,a.ih)({},u[u.length-1])),s(u,{noData:!1})}catch(u){"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.log("[getBars]: Get Chaos Historical Data Error",u),n(String(u))}})),subscribeBars:(e,t,r,s,n)=>(0,a.Cr)(void 0,null,(function*(){"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[subscribeBars]: Method call with listenerGuid:",s);const o=M.get(e.ticker+t);if(!o)throw new Error("ChaosTVDataFeed: lastBar is not found");yield x.subscribeOnStream(e,t,r,s,n,o)})),unsubscribeBars:e=>(0,a.Cr)(void 0,null,(function*(){"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[unsubscribeBars]: Method call with listenerGuid:",e),yield x.unsubscribeFromStream(e)}))}),G=new Map;function O(e,t){const{price:r,time:s}=t,n=r,o=1e3*s,i=e,c=G.get(i);if(!c)return;const l=c.lastDailyBar,u=function(e){const t=new Date(1e3*e);return t.setDate(t.getDate()+1),t.getTime()/1e3}(l.time);let d;o>=u?(d={time:u,open:n,high:n,low:n,close:n},"1"===f.env.DEBUG_ADVANCED_TV&&console.log("[stream] Generate new bar",d)):(d=(0,a.EZ)((0,a.ih)({},l),{high:Math.max(l.high,n),low:Math.min(l.low,n),close:n}),"1"===f.env.DEBUG_ADVANCED_TV&&console.log("[stream] Update the latest bar by price",n)),c.lastDailyBar=d,c.handlers.forEach((e=>e.callback(d))),G.set(i,c)}function R(e,t,r,s,o,i){const a=e.ticker+t||"",c={id:s,callback:r};let l=G.get(a);l={subscriberUID:s,resolution:t,lastDailyBar:i,handlers:[c],unsub:()=>{}},G.set(a,l),"1"===f.env.DEBUG_ADVANCED_TV&&console.log("[subscribeBars]: Subscribe to streaming. Channel:",a);const u=(0,n.EA)(e.ticker),d=n.e_.sub(u,(()=>{const e=n.e_.get(u);e&&O(a,e)}));l.unsub=d}function j(e){for(const t of G.keys()){const r=G.get(t);null==r||r.unsub();if(-1!==r.handlers.findIndex((t=>t.id===e))){"1"===f.env.DEBUG_ADVANCED_TV&&console.log("[unsubscribeBars]: Unsubscribe from streaming. Channel:",t),G.delete(t);break}}}var X="https://benchmarks.pyth.network/v1/shims/tradingview",F=["1","2","5","15","30","60","120","240","360","720","1D"],H=new Map;var Z,q=()=>({onReady:e=>{"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[onReady]: Method call"),h((e=>(0,a.Cr)(void 0,null,(function*(){try{const e=yield fetch(`${X}/config`);return yield e.json()}catch(t){e(t)}}))),{retries:5,minTimeout:1e3}).then((t=>{e((0,a.EZ)((0,a.ih)({},t),{supported_resolutions:F}))})).catch((e=>{"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error(e)}))},searchSymbols:(e,t,r,s)=>{"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[searchSymbols]: Method call"),h((t=>(0,a.Cr)(void 0,null,(function*(){try{const t=yield fetch(`${X}/search?query=${e}`);return yield t.json()}catch(r){return t(r)}}))),{retries:5,minTimeout:1e3}).then((e=>{s(e)})).catch((e=>{"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error(e)}))},resolveSymbol:(e,t,r)=>{"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[resolveSymbol]: Method call",e),h((t=>(0,a.Cr)(void 0,null,(function*(){try{const t=yield fetch(`${X}/symbols?symbol=${e}`),r=yield t.json(),{precisionToDisplay:s}=yield function(e){return(0,a.Cr)(this,null,(function*(){const t=((new Date).getTime()/1e3).toFixed(0),r=yield fetch(`${X}/history?symbol=${e.ticker}&from=${Number(t)-1e3}&to=${t}&resolution=15`),s=(yield r.json()).c[0];return{closePrice:s,precisionToDisplay:(0,i.y_)(s)}}))}(r);return{symbolInfo:(0,a.EZ)((0,a.ih)({},r),{supported_resolutions:F}),precisionToDisplay:s}}catch(r){return t(r)}}))),{retries:5,minTimeout:1e3}).then((({symbolInfo:e,precisionToDisplay:r})=>{t((0,a.EZ)((0,a.ih)({},e),{pricescale:(0,a.f3)(10,r)}))})).catch((t=>{"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[resolveSymbol]: Cannot resolve symbol",e,t),r("Cannot resolve symbol")}))},getBars:(e,t,r,s,n)=>{const{from:o,to:i,firstDataRequest:c}=r;h((s=>(0,a.Cr)(void 0,null,(function*(){try{const s=yield fetch(`${X}/history?symbol=${e.ticker}&from=${r.from}&to=${r.to}&resolution=${t}`);return yield s.json()}catch(n){return s(n)}}))),{retries:5,minTimeout:1e3}).then((r=>{if("1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.log("[getBars]: Method call",e,t,o,i),0===r.t.length)return void s([],{noData:!0});const n=[];for(let e=0;e<r.t.length;++e)n.push({time:1e3*r.t[e],low:r.l[e],high:r.h[e],open:r.o[e],close:r.c[e]});c&&H.set(e.ticker+t,(0,a.ih)({},n[n.length-1])),s(n,{noData:!1})})).catch((e=>{"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[getBars]: Get error",e),n(e)}))},subscribeBars:(e,t,r,s,n)=>{"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[subscribeBars]: Method call with subscriberUID:",s),R(e,t,r,s,0,H.get(e.ticker+t))},unsubscribeBars:e=>{"1"===f.env.NEXT_PUBLIC_DEBUG_ADVANCED_TV&&console.error("[unsubscribeBars]: Method call with subscriberUID:",e),j(e)}}),J={long:{main:"#32DF7B",shade:"#32DF7BB3"},short:{main:"#EB5757",shade:"#EB5757B3"},tp:{main:"#00BCF0",shade:"#00BCF0B3"},sl:{main:"#00BCF0",shade:"#00BCF0B3"},lq:{main:"rgb(100,116,139)",shade:"rgb(100,116,139)"}},W={enableVolumeStudy:!0,useUserBrowserTime:!0,showSeriesOHLC:!0,showVolume:!0,showPriceSource:!0,showBarChange:!0,isMobile:!1},z="TRADING_VIEW_STATE",Q=e=>{window.localStorage.setItem(z,JSON.stringify(e))},K={current:null};function Y({renderingId:e,datafeedObject:t,style:r,tvClassName:n,shadesClassName:h,desktopOverlayExplanation:f,positions:b,opt:m,hasFocus:g,favoriteIntervals:_}){const p=(0,o.XA)(),[y,v]=(0,o._)("lastInterval","15"),C=(0,c.useMemo)((()=>(0,a.EZ)((0,a.ih)((0,a.ih)({},W),m),{isMobile:p})),[m,p]),E=(0,c.useMemo)((()=>`${e}-tradingview-chart`),[e]),B=(0,c.useRef)(null),{getTokenInfo:D}=(0,s.Bn)(),k=(0,c.useRef)(null),I=(0,c.useRef)(),[A,N]=(0,c.useState)(0),P=(0,c.useMemo)((()=>{var e,r;return I.current=t,[null==(e=null==t?void 0:t.baseTokenInfo)?void 0:e.address,null==(r=null==t?void 0:t.quoteTokenInfo)?void 0:r.address,null==t?void 0:t.pythId,null==t?void 0:t.subscriptionId,null==t?void 0:t.feedId,A].filter(Boolean).join("_")}),[t]),{symbol:U,tickerName:V,datafeed:x}=(0,c.useMemo)((()=>{if("pythId"in t)return{symbol:t.symbol,tickerName:t.tickerName,datafeed:q()};if("feedId"in t)return{symbol:t.feedId,tickerName:t.feedId,datafeed:$()};const{baseTokenInfo:e,quoteTokenInfo:r}=t;return e&&r?(B.current||(B.current=w(D)),{symbol:T(e.address,r.address),tickerName:`${e.symbol}/${r.symbol}`,datafeed:B.current}):{symbol:null,tickerName:null,datafeed:null}}),[P,D]),[L,M]=(0,c.useState)(!1),[G,O]=(0,c.useState)(!1),[R,j]=((0,c.useRef)(0),(0,c.useState)(!1)),X=(0,c.useRef)(null);(0,c.useEffect)((()=>{if(V)return Z||(Z=new Promise((e=>{const t=document.createElement("script");t.id="tradingview-widget-loading-script",t.src="https://static.jup.ag/tv/charting_library/charting_library.js",t.type="text/javascript",t.onload=e,document.head.appendChild(t)}))).then((()=>{e()})),"TradingView"in window&&e(),()=>{K.current=null};function e(){return(0,a.Cr)(this,null,(function*(){if(V&&!R&&U&&x&&(O(!1),document.getElementById(E)&&"TradingView"in window)){const e=["hide_left_toolbar_by_default","save_shortcut","create_volume_indicator_by_default"],t=["popup_hints","header_symbol_search","symbol_search_hot_key","header_compare","timeframes_toolbar","header_undo_redo","display_market_status"];p&&(t.push("vert_touch_drag_scroll"),t.push("axis_pressed_mouse_move_scale"));const r=(()=>{const e=window.localStorage.getItem(z);return e?JSON.parse(e):void 0})();K.current=new window.TradingView.widget({symbol:U,interval:y||"15",locale:"en",container:E,theme:"dark",autosize:!0,custom_css_url:"https://static.jup.ag/tv/css/tradingview.css",settings_overrides:{"chartEventsSourceProperties.breaks.visible":!1,"paneProperties.legendProperties.showSeriesTitle":!1,"paneProperties.background":"#131B24","paneProperties.backgroundType":"solid","paneProperties.legendProperties.backgroundTransparency":50,"paneProperties.legendProperties.showSeriesOHLC":C.showSeriesOHLC,"paneProperties.legendProperties.showBarChange":C.showBarChange,"paneProperties.legendProperties.showVolume":C.showVolume,"paneProperties.legendProperties.showPriceSource":C.showPriceSource,"scalesProperties.showSeriesPrevCloseValue":!1,"scalesProperties.showSymbolLabels":!1,"scalesProperties.showStudyPlotLabels":!1,"scalesProperties.showFundamentalNameLabel":!1,"scalesProperties.fontSize":C.isMobile?7:12},overrides:{"mainSeriesProperties.highLowAvgPrice.highLowPriceLabelsVisible":!0,"mainSeriesProperties.highLowAvgPrice.highLowPriceLinesVisible":!0},width:"100%",height:"100%",datafeed:x,library_path:"https://static.jup.ag/tv/charting_library/bundles",disabled_features:t,enabled_features:e,custom_formatters:{priceFormatterFactory:()=>({format:e=>{const t=S({value:e,maxSuffix:6}),r=(0,i.y_)(e);return new l.Z(e).gt(1e-4)?i.uf.format(e.toString(),r):t}})},favorites:{intervals:_&&_.length?_:["1","30","1h"],chartTypes:["Candles","Area","Columns"]},saved_data:r})}}))}}),[p,L]),(0,c.useEffect)((()=>{try{if(!K.current||!K.current.activeChart())return;if("pythId"in t)return void K.current.activeChart().setSymbol(t.symbol);if("feedId"in t)return void K.current.activeChart().setSymbol(t.feedId);t.baseTokenInfo&&t.quoteTokenInfo&&K.current.activeChart().setSymbol(T(t.baseTokenInfo.address,t.quoteTokenInfo.address))}catch(e){console.log(e)}}),[P]);const F=(0,c.useCallback)((()=>{var e;null==(e=K.current)||e.remove(),M(!1),setTimeout((()=>{M(!0),N((e=>e+1))}),1e3)}),[]),{online:H}=(0,u.Z)();return(0,c.useEffect)((()=>{const e=setInterval((()=>{g&&H&&X.current&&Date.now()-X.current>6e4&&(console.log("Restarting charts..."),F(),X.current=Date.now()+1e4)}),500);return()=>{clearInterval(e)}}),[g,H,F]),(({isLoaded:e,widget:t,positions:r})=>{const{wallet:n}=(0,s.Os)(),{connection:o}=(0,s.Bn)(),i=(0,c.useRef)([]);(0,c.useEffect)((()=>{t&&e?r&&r.length>0&&r.forEach((e=>{if(t&&!i.current.find((t=>t.id===e.id)))try{t.onChartReady((()=>{let r;const s=J[e.action].main,n=J[e.action].shade;"lq"===e.action?r=t.activeChart().createPositionLine():(r=t.activeChart().createOrderLine(),r.setCancelTooltip("Market close").onCancel(r,(t=>{e.onCloseAction&&(t.setText(`Closing ${e.label}...`),e.onCloseAction(e).finally((()=>{t.setText(e.label)})))})).setCancelButtonBackgroundColor(n).setCancelButtonBorderColor(s).setCancelButtonIconColor("#fff")),r.setPrice(e.price).setText(e.label).setQuantity(`$${e.sizeUsd}`).setLineColor(s).setBodyBackgroundColor(n).setBodyBorderColor(s).setQuantityBorderColor(s).setQuantityBackgroundColor(n).setBodyTextColor("#fff").setQuantityTextColor("#fff"),i.current.push({id:e.id,adapter:r})}))}catch(r){console.error(r)}})):i.current=[]}),[r,i,t,e,n,o]),(0,c.useEffect)((()=>{Array.isArray(r)&&0===r.length?i.current.forEach(((e,t)=>{e.adapter.remove(),i.current=[]})):i.current.forEach(((e,t)=>{if(!(null==r?void 0:r.find((t=>t.id===e.id)))&&e.adapter&&e.adapter.remove)try{e.adapter.remove()}catch(R){}finally{i.current.splice(t,1)}}))}),[r])})({positions:b,isLoaded:L&&G,widget:K.current}),(0,c.useEffect)((()=>{const e=setInterval((()=>{const e=K.current,t=null==e?void 0:e.activeChart();!e||!t||L&&G||e.onChartReady((()=>{M(!0),X.current=Date.now(),I.current&&("pythId"in I.current?e.activeChart().setSymbol(I.current.symbol):"feedId"in I.current?e.activeChart().setSymbol(I.current.feedId):I.current.baseTokenInfo&&I.current.quoteTokenInfo&&e.activeChart().setSymbol(T(I.current.baseTokenInfo.address,I.current.quoteTokenInfo.address)));const t=e.activeChart().getAllStudies().find((e=>"Volume"===e.name));if(e.applyOverrides({"mainSeriesProperties.highLowAvgPrice.highLowPriceLabelsVisible":!0,"mainSeriesProperties.highLowAvgPrice.highLowPriceLinesVisible":!0}),(null==m?void 0:m.enableVolumeStudy)&&!p?t||e.activeChart().createStudy("Volume"):t&&e.activeChart().removeEntity(t.id),e.subscribe("onAutoSaveNeeded",(()=>{e.save(Q)})),e.subscribe("onTick",(()=>{X.current=Date.now()})),e.activeChart().dataReady((()=>{setTimeout((()=>{O(!0)}),250)})),e.activeChart().onIntervalChanged().subscribe(null,(e=>{v(e)})),C.useUserBrowserTime&&K.current){const t=e.activeChart().getTimezoneApi(),r=60*(new Date).getTimezoneOffset()*1e3*-1,s=t.availableTimezones().find((e=>e.offset===r));t.setTimezone((null==s?void 0:s.id)||"Etc/UTC")}}))}),1e3);return()=>{K.current=null,clearInterval(e)}}),[]),(0,d.jsxs)("div",{ref:k,className:(0,i.cn)("relative flex-1 overflow-hidden transition-all"),style:R?{height:0}:(0,a.ih)({minHeight:200,height:"100%",width:"100%"},r),children:[(0,d.jsx)("div",{className:(0,i.cn)("pointer-events-none absolute left-0 top-0 h-full w-full transition-all",L&&G?"bg-transparent":`bg-v2-background ${h}`,"flex items-center justify-center"),children:L&&G?null:(0,d.jsx)(s.$j,{})}),(0,d.jsx)("div",{id:E,className:(0,i.cn)("h-full w-full",n,G?"opacity-100":"opacity-0"),style:(0,a.ih)({minHeight:200},r)}),f?(0,d.jsx)("div",{className:"absolute bottom-10 hidden w-full justify-center lg:bottom-20 lg:flex",children:(0,d.jsx)("div",{className:"text-v2-lily/60 w-[75%] text-xs font-semibold",children:(0,d.jsx)("div",{className:"flex items-center justify-center text-center",children:(0,d.jsx)("span",{children:f})})})}):null,f?(0,d.jsx)("div",{className:"text-v2-lily/60 mt-4 hidden h-[120px] lg:flex",children:f}):null]})}}}]);
//# sourceMappingURL=7763-bb488b30a331a23a.js.map