"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[75868],{71130:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(93981),s=n(50269),a=n(24201),i=n(29541),c=function(e){var t=e.children,n=e.className,s=void 0===n?"":n,c=e.height,o=e.maxHeight,l=e.expanded,u=(0,r.useState)(c),d=u[0],p=u[1];(0,r.useEffect)((function(){p(l?o:c)}),[c,o,l]);var x=l?"animate-fade-in":"animate-fade-out";return(0,i.jsx)("div",{className:(0,a.cn)("overflow-hidden transition-all duration-200",x,s),style:{height:d,maxHeight:o},children:t})},o=function(e){var t=e.message,n=e.iconSize,r=void 0===n?20:n,o=e.className;return(0,i.jsx)(c,{height:0,maxHeight:"auto",expanded:Boolean(t),children:(0,i.jsxs)("div",{className:(0,a.cn)("mt-1 flex items-center fill-current text-xs font-semibold text-white md:px-6",o),children:[(0,i.jsx)(s.Z,{width:r,style:{minWidth:r},height:r}),(0,i.jsx)("span",{className:"ml-2",children:t})]})})}},75868:function(e,t,n){n.r(t),n.d(t,{default:function(){return J}});var r=n(8473),s=n(93981),a=n(6099),i=n.n(a),c={src:"/_next/static/media/white-icon-info.eab507fc.svg",height:20,width:20,blurWidth:0,blurHeight:0},o=n(25546),l=n(13170),u=n(72215),d=n(63956),p=n(27195),x=n(8857),h=n.n(x),f=n(27177),b=n(70107),m=n(4707),j=n(75206),g=n(7744),w=n(11003),v=n(59394),y=n(3872),O=n.n(y),k=n(29541);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(){return Z=(0,p.Z)(h().mark((function e(t,n){var r,s,a,i,c=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:{},s=r.toast,a=r.toastId,s&&a&&s({id:a,duration:3e4,render:function(e){return(0,k.jsx)(w.ZJ,S(S({},e),{},{variant:w.Lb.INFO,title:m.ag._({id:"fAPj6l"}),description:(0,k.jsx)(v.Z,{txid:n})}))}}),e.next=4,O()(function(){var e=(0,p.Z)(h().mark((function e(r){var s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTransaction(n,{commitment:"confirmed"});case 2:return(s=e.sent)||r(new Error("Transaction not found yet")),e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{retries:5,minTimeout:500}).catch((function(){return null}));case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}var P=function(e,t){return Z.apply(this,arguments)};function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(){var e=(0,u.Os)(),t=(0,u.Rc)(),n=(0,f.lm)(),a=n.toast,i=n.close,c=(0,u.C9)(),o=(0,s.useCallback)(function(){var n=(0,p.Z)(h().mark((function n(s){var o,l,u,d,p,x,f,y,O,N,S;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.publicKey&&e.signTransaction){n.next=2;break}return n.abrupt("return");case 2:return l=e.publicKey,u=s.map((function(e){return j.WU.createCloseAccountInstruction(j.H_,e,l,l,[])})),n.next=6,t.getLatestBlockhash("confirmed");case 6:return d=n.sent,p=d.blockhash,x=d.lastValidBlockHeight,f=new g.Transaction({feePayer:e.publicKey,blockhash:p,lastValidBlockHeight:x}),(o=f).add.apply(o,(0,b.Z)(u)),n.next=13,e.signTransaction(f);case 13:return f=n.sent,y=f.serialize(),n.next=17,t.sendRawTransaction(y,{skipPreflight:!0});case 17:return O=n.sent,N="close-".concat(Math.floor(1e3*Math.random())),n.next=21,P(t,O,{toast:a,toastId:N});case 21:if(S=n.sent,i(N),!S){n.next=27;break}return c(s),a({render:function(e){return(0,k.jsx)(w.ZJ,L(L({},e),{},{variant:w.Lb.SUCCESS,title:"Transaction successful",description:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{children:["Successfully closed ",s.length," token account",s.length>1?"s":""," "]}),(0,k.jsx)("div",{children:(0,k.jsx)(v.Z,{txid:O})})]})}))}}),n.abrupt("return");case 27:a({duration:5e3,title:m.ag._({id:"QawP/B"}),description:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("p",{children:(0,k.jsx)(r.cC,{id:"0VtnW4"})}),(0,k.jsx)("p",{children:(0,k.jsx)(v.Z,{txid:O})})]}),variant:w.Lb.ERROR});case 28:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[t,e,i,c,a]);return o};function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(e){var t=(0,f.lm)().toast,n=T(),r=(0,u.gZ)(),a=r.userAccounts,i=r.refetchAccounts,c=a.filter((function(e){return e.info.mint.equals(l.W4)&&!e.pubkey.equals(e.info.owner)})),o=s.useCallback((0,p.Z)(h().mark((function e(){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=c.map((function(e){return e.pubkey})).slice(0,27),e.next=4,n(r);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t({variant:w.Lb.ERROR,title:"Failed",description:e.t0 instanceof Error?e.t0.message:"Something went wrong. Please try again later."});case 9:return e.prev=9,i(),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])}))),[n,c,t,i]);return(0,k.jsx)("button",_(_({},e),{},{onClick:o}))},R=n(25224),B=n(97620),A=n(56720),D=n(32532),F=n(13838),H=n(24201),M=function(e){var t=e.className,n=e.style,r=e.children,s=e.onClick;return(0,k.jsx)("div",{style:n,className:(0,H.cn)("flex w-full rounded-xl bg-tuna shadow-lg",t),onClick:s,children:r})},I=n(85394),K=n(12866),V=n(70006),U=n(71130),Y=n(69825),q=function(){var e=(0,u.Os)(),t=e.publicKey,n=e.sendTransaction,a=(0,f.lm)(),c=a.toast,d=a.close,x=(0,u.Bn)().connection,b=(0,V.JT)().closeModal,j=(0,u.x$)(),y=j.totalWrappedSOL,O=j.wrappedSOLAccounts,N=(0,u.FB)(l.W4).balance,S=s.useState("wrap"),Z=(0,B.Z)(S,2),P=Z[0],C=Z[1],L=s.useState(""),W=(0,B.Z)(L,2),_=W[0],E=W[1],q=Number(_),J=s.useState(!1),z=(0,B.Z)(J,2),Q=z[0],G=z[1],X=s.useState(!1),$=(0,B.Z)(X,2),ee=$[0],te=$[1],ne=(0,u.C9)(),re=T(),se="WRAP_UNWRAP_SOL_TOAST_ID",ae=new F.Z(q).gt(N),ie=new F.Z(N).sub((0,R.Hd)(_)?Number(_):0).toNumber(),ce=function(){var e=(0,p.Z)(h().mark((function e(){var s,a,i,o,u,p,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return G(!0),e.prev=3,s=new F.Z(_).mul(g.LAMPORTS_PER_SOL).toNumber(),e.next=7,x.getLatestBlockhash("confirmed");case 7:return a=e.sent,i=a.blockhash,o=a.lastValidBlockHeight,e.next=12,(0,D.cO)({connection:x,publicKey:t,amountToTransferInLamports:s,blockhash:i,lastValidBlockHeight:o});case 12:return u=e.sent,e.next=15,n(u,x);case 15:return p=e.sent,c({duration:12e4,id:se,title:m.ag._({id:"lpsuk2"}),description:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("p",{children:(0,k.jsx)(r.cC,{id:"bQDW7e",values:{solAmountToWrap:_}})}),(0,k.jsx)("p",{children:(0,k.jsx)(v.Z,{txid:p})})]}),closeOnClick:!1,variant:w.Lb.INFO}),e.next=19,x.confirmTransaction({signature:p,blockhash:i,lastValidBlockHeight:o});case 19:if(f=e.sent,d(se),!f){e.next=24;break}return c({duration:5e3,title:m.ag._({id:"eaTa58"}),description:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("p",{children:(0,k.jsx)(r.cC,{id:"fYYOzu",values:{solAmountToWrap:_}})}),(0,k.jsx)("p",{children:(0,k.jsx)(v.Z,{txid:p})})]}),variant:w.Lb.SUCCESS}),e.abrupt("return");case 24:c({duration:5e3,title:m.ag._({id:"mWhgnb"}),description:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("p",{children:(0,k.jsx)(r.cC,{id:"9gFhEK",values:{solAmountToWrap:_}})}),(0,k.jsx)("p",{children:(0,k.jsx)(v.Z,{txid:p})})]}),variant:w.Lb.ERROR}),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(3),console.error(e.t0);case 30:return e.prev=30,setTimeout((function(){ne([l.W4])}),400),G(!1),E(""),e.finish(30);case 35:case"end":return e.stop()}}),e,null,[[3,27,30,35]])})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=(0,p.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te(!0),t=O.map((function(e){return e.pubkey})).slice(0,27),e.prev=2,e.next=5,re(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:return e.prev=10,setTimeout((function(){ne(t)}),400),te(!1),b(),e.finish(10);case 15:case"end":return e.stop()}}),e,null,[[2,7,10,15]])})));return function(){return e.apply(this,arguments)}}();return(0,k.jsx)(M,{className:(0,H.cn)("!bg-v2-background px-5 py-6 text-xs text-white-75"),children:(0,k.jsxs)("div",{className:"w-full text-white-75",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsx)("h2",{className:"text-base font-semibold",children:"Your SOL / wSOL"}),(0,k.jsx)("button",{type:"button",onClick:b,children:(0,k.jsx)(K.Z,{width:16,height:16})})]}),(0,k.jsxs)("div",{className:"webkit-scrollbar mt-3 max-h-[70vh] overflow-auto",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{children:"You can manually wrap SOL and unwrap wSOL here."}),(0,k.jsx)("a",{href:"https://station.jup.ag/guides/general/wrapped-sol",target:"_blank",className:"underline",children:"Read more"})]}),(0,k.jsx)("div",{className:"mt-6",children:(0,k.jsxs)("div",{children:[(0,k.jsxs)("button",{type:"button",className:(0,H.cn)("space-y-1 rounded-t-lg px-4 py-2 text-left",{"bg-black-10":"wrap"===P}),onClick:function(){return C("wrap")},children:[(0,k.jsx)("p",{children:"SOL"}),(0,k.jsx)("p",{className:"text-base font-semibold text-white",children:new F.Z(N).lt(.01)?"0.00":o.uf.format(N,4)})]}),(0,k.jsxs)("button",{type:"button",className:(0,H.cn)("space-y-1 rounded-t-lg px-4 py-2 text-left",{"bg-black-10":"unwrap"===P}),onClick:function(){return C("unwrap")},children:[(0,k.jsx)("p",{children:"wSOL"}),(0,k.jsx)("p",{className:"text-base font-semibold text-white",children:y<.01?"0.00":o.uf.format(String(y),4)})]}),(0,k.jsx)("div",{className:(0,H.cn)("rounded-lg bg-black-10 px-3 py-4",{"rounded-tl-none":"wrap"===P}),children:"wrap"===P?(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"flex items-baseline space-x-2",children:[(0,k.jsx)("p",{className:"text-white",children:"You wrap"}),(0,k.jsxs)("p",{className:"!ml-auto",children:["Balance ",o.uf.format(N,2)," SOL"]}),(0,k.jsx)("button",{onClick:function(){return E(new F.Z(N).div(2).toDP(9).toString())},className:"rounded-full bg-white-25 px-2 py-0.5 text-xxs font-semibold uppercase text-white-35",children:"Half"}),(0,k.jsx)("button",{onClick:function(){return E(new F.Z(N).gt(A.WO)?new F.Z(N).sub(A.WO).toFixed():"0")},className:"rounded-full bg-white-25 px-2 py-0.5 text-xxs font-semibold uppercase text-white-35",children:"Max"})]}),(0,k.jsx)("div",{className:"mt-4",children:(0,k.jsxs)("div",{className:"flex items-center justify-between rounded-lg bg-black-25 px-3 py-4",children:[(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"flex overflow-hidden rounded-full",children:(0,k.jsx)(i(),{src:"/images/sol.png",alt:"",width:24,height:24})}),(0,k.jsx)("div",{className:"ml-2 text-sm font-medium",children:"SOL"})]}),(0,k.jsx)("div",{className:"text-right",children:(0,k.jsx)(Y.Z,{decimals:9,disabled:!1,onChange:function(e){var t=e.floatValue;return E(t?String(t):"")},className:"!text-sm !outline-none",value:_?String(_):""})})]})}),(0,k.jsxs)("button",{onClick:ce,disabled:!q||ae||Q,className:"mt-3 flex w-full items-center justify-center space-x-2 rounded-lg bg-[#141519] p-5 text-base font-semibold text-white disabled:cursor-not-allowed disabled:opacity-50",children:[Q&&(0,k.jsx)(I.Z,{className:"h-6 w-6",spinnerColor:"white"}),(0,k.jsx)("span",{children:ae?m.ag._({id:"GyFBKR"}):m.ag._({id:"3y77ci"})})]}),ie<A.WO&&(0,k.jsx)(U.Z,{className:"!px-2 text-white",message:m.ag._({id:"p6yX1j",values:{MINIMUM_SOL_BALANCE:A.WO}})})]}):(0,k.jsx)("div",{children:(0,k.jsxs)("button",{onClick:oe,disabled:!y||ee,className:"flex w-full items-center justify-center space-x-2 rounded-lg bg-[#141519] p-5 text-base font-semibold text-white disabled:cursor-not-allowed disabled:opacity-50",children:[ee&&(0,k.jsx)(I.Z,{className:"h-6 w-6",spinnerColor:"white"}),(0,k.jsx)("span",{children:"Unwrap wSOL to SOL"})]})})})]})})]})]})})},J=function(){var e=(0,u.gZ)().userAccounts,t=(0,u.jB)().useWSol,n=(0,V.JT)().openModal,a=(0,u.FB)(l.W4).balance,d=(0,s.useMemo)((function(){var t=e.filter((function(e){return e.info.mint.equals(l.W4)&&!e.pubkey.equals(e.info.owner)})).reduce((function(e,t){return e+t.info.amount.toNumber()}),0);return(0,o.lt)(t,9)}),[e]);return t?(0,k.jsxs)("div",{className:"mb-2 flex items-center space-x-4 rounded-lg bg-v2-background px-5 py-3 text-xs font-medium text-white",children:[(0,k.jsxs)("div",{className:"space-y-px",children:[(0,k.jsx)("p",{className:"text-white-75",children:"SOL"}),(0,k.jsx)("p",{className:"text-base font-semibold leading-none",children:new F.Z(a).lt(.01)?"0.00":R.uf.format(a,6)})]}),(0,k.jsx)("div",{className:"w-px flex-shrink-0 self-stretch bg-white-25"}),(0,k.jsxs)("div",{className:"space-y-px",children:[(0,k.jsx)("p",{className:"text-white-75",children:"wSOL"}),(0,k.jsx)("p",{className:"text-base font-semibold leading-none",children:d<.01?"0.00":d})]}),(0,k.jsx)("div",{className:"!ml-auto",children:(0,k.jsx)("button",{className:"rounded-lg bg-black-25 px-4 py-2 text-xxs transition duration-300 hover:bg-black-50",type:"button",onClick:function(){return n((0,k.jsx)(q,{}))},children:"Manage"})})]}):0===d?null:(0,k.jsxs)("div",{className:"mb-4 flex items-center space-x-3 rounded-lg bg-v2-background px-5 py-3 text-xs text-white",children:[(0,k.jsx)(i(),{alt:"info icon",src:c,width:16,height:16}),(0,k.jsx)("div",{children:(0,k.jsx)(r.cC,{id:"w77g0y",values:{totalWrappedSOL:d},components:{0:(0,k.jsx)(E,{className:"cursor-pointer font-bold underline"})}})})]})}}}]);
//# sourceMappingURL=75868.a89944fd40cd610d.js.map