(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[36467],{53636:function(e,t,n){"use strict";var s=n(63956),r=n(54423),i=n(93981),a=n(87821),l=n(25546),o=n(29541),c=["currency"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.currency,n=void 0===t||t,s=(0,r.Z)(e,c),d=i.useMemo((function(){return","===l.A5?".":","}),[]);return(0,o.jsx)(a.Z,u(u({displayType:"text",prefix:n?"$":""},s),{},{decimalSeparator:l.A5,thousandSeparator:d}))}},55259:function(e,t,n){"use strict";var s=n(72215),r=n(93981),i=n(24201),a=n(56100),l=n(82625),o=n(69825),c=n(29541);t.Z=function(e){var t=e.onChange,n=e.onBlur,d=e.tokenAddress,u=e.loading,x=e.value,m=e.name,f=e.disabled,v=e.tokenAmountClassname,h=e.usdValueClassname,p=(0,s.Bn)().getTokenInfo,j=r.useRef(null),b=r.useMemo((function(){return p(d)}),[p,d]);return(0,c.jsxs)("div",{className:"flex h-full flex-col text-right",children:[u||!b?(0,c.jsx)(a.O,{className:"ml-2 h-6 w-24 self-end"}):(0,c.jsx)(o.Z,{name:m,className:(0,i.cn)("outline-none",v),decimals:b.decimals,onChange:t,value:x.value,disabled:f,ref:j,onBlur:n}),u?(0,c.jsx)(a.O,{className:"ml-2 mt-0.5 h-4 w-8 self-end"}):null!==x&&void 0!==x&&x.value?(0,c.jsx)("div",{className:(0,i.cn)("text-xs text-white-35"),onClick:function(){var e;return null===j||void 0===j||null===(e=j.current)||void 0===e?void 0:e.focus()},children:(0,c.jsx)(l.Z,{tokenAddress:d,value:x,className:h})}):null]})}},13246:function(e,t,n){"use strict";var s=n(93981),r=n(72215),i=n(70006),a=n(7842),l=n(59978),o=n(1242),c=n(42082),d=n(69667),u=n(24201),x=n(29541),m=function(e){var t=e.showAllPairs,n=e.currentTokenInfo,s=e.disabled;return(0,x.jsx)("div",{className:"group/select flex items-center justify-between",children:(0,x.jsxs)("button",{disabled:s,type:"button",className:(0,u.cn)("flex h-10 items-center space-x-3 rounded-xl border border-transparent px-3 py-2",s?"cursor-default":"bg-v2-background-page group-hover/select:border-v2-primary/50 group-hover/select:bg-[rgba(199,242,132,0.2)] group-hover/select:shadow-swap-input-dark"),onClick:t,children:[(0,x.jsx)("div",{className:"rounded-full",children:(null===n||void 0===n?void 0:n.logoURI)&&(0,x.jsx)(l.Z,{width:24,height:24,info:n})}),(0,x.jsx)("div",{className:"text-sm font-semibold",translate:"no",children:null===n||void 0===n?void 0:n.symbol}),!s&&(0,x.jsx)("div",{className:"fill-current text-white/25 group-hover/select:text-v2-primary",children:(0,x.jsx)(d.Z,{})})]})})},f=function(e){var t=e.showAllPairs,n=e.currentTokenInfo,s=e.disabled;return(0,x.jsx)("div",{className:"flex h-full w-full items-center justify-between rounded-lg",children:(0,x.jsxs)("button",{type:"button",className:(0,u.cn)("flex h-full w-full items-center space-x-3 rounded-xl border border-transparent px-4 pb-4 pt-2",s?"cursor-default":""),onClick:t,children:[(0,x.jsx)("div",{className:"rounded-full",children:(null===n||void 0===n?void 0:n.logoURI)&&(0,x.jsx)(l.Z,{width:24,height:24,info:n})}),(0,x.jsx)("div",{className:"text-base font-semibold",translate:"no",children:null===n||void 0===n?void 0:n.symbol}),!s&&(0,x.jsx)("div",{className:"!ml-auto fill-current text-white/25 group-hover:text-v2-primary",children:(0,x.jsx)(d.Z,{})})]})})};t.Z=function(e){var t=e.fromTokenAddress,n=e.toTokenAddress,l=e.onChange,d=e.name,u=e.modalId,v=e.mintsList,h=e.type,p=e.disabled,j=(0,r.Bn)().getTokenInfo,b=(0,i.JT)(),g=b.openContextualModal,w=b.setContextValue,y=b.ModalContextConsumer,N=b.closeModal,k=(0,c.T)(),C=(0,s.useMemo)((function(){return"fromTokenAddress"===d?t:n}),[t,n,d]),S=(0,s.useMemo)((function(){return j(C)}),[j,C]),Z=function(e){if(e){var s,r;if("fromTokenAddress"===d)n===e.address?(s=e,r=j(t)):(s=e,r=j(n));else t===e.address?(s=j(n),r=e):(s=j(t),r=e);s&&r&&(N(),l("fromTokenAddress"===d?s.address:r.address),k(s,r))}},V=function(){y&&!p&&(w(u,v),g(u,v,(0,x.jsx)(y,{children:function(e){return(0,x.jsx)(a.ZP,{onSubmit:Z,mintsList:e,bestTokens:o.KG})}}),{position:"top",noCloseButton:!0}))};return"tokenAndInput"===h?(0,x.jsx)(m,{disabled:p,showAllPairs:V,currentTokenInfo:S}):(0,x.jsx)(f,{disabled:p,showAllPairs:V,currentTokenInfo:S})}},32044:function(e,t,n){"use strict";var s=n(72215),r=(n(93981),n(96404)),i=n(16344),a=n(24201),l=n(29541);t.Z=function(e){var t=e.className,n=e.tokenInfo;if(!(0,s.Os)().connected||!n)return null;var o=n.address;return(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)("div",{className:"mb-px fill-current text-white-75",children:(0,l.jsx)(i.Z,{width:12,height:12})}),(0,l.jsxs)("div",{className:(0,a.cn)("whitespace-nowrap text-xs font-normal text-v2-lily/50",t),children:[(0,l.jsx)(r.Z,{mintAddress:o})," ",(0,l.jsx)("span",{children:null===n||void 0===n?void 0:n.symbol})]})]})}},57722:function(e,t,n){"use strict";n.d(t,{Pf:function(){return l},YB:function(){return i},Ye:function(){return a},hl:function(){return o},tc:function(){return d}});var s,r=n(4707),i=2,a=10,l=20,o=.5,c=86400,d=[{id:"minute",name:r.ag._({id:"rEY/kE"}),secondsInPeriod:60},{id:"hour",name:r.ag._({id:"N71Q1g"}),secondsInPeriod:3600},{id:"day",name:r.ag._({id:"/ITcnz"}),secondsInPeriod:c},{id:"week",name:r.ag._({id:"64X6l4"}),secondsInPeriod:604800},{id:"month",name:r.ag._({id:"kY2ll9"}),secondsInPeriod:2592e3}];!function(e){e.DCA="DCA",e.VA="VA"}(s||(s={}))},26260:function(e,t,n){"use strict";var s=n(97620),r=n(93981),i=n(24201),a=n(25546),l=n(30610),o=n(29541);t.Z=function(e){var t=e.className,n=e.children,c=e.data,d=e.rowRenderer,u=e.onChange,x=e.contentClassName,m=e.rowClassName,f=e.filter,v=e.disabled,h=r.useState(!1),p=(0,s.Z)(h,2),j=p[0],b=p[1],g=r.useState(""),w=(0,s.Z)(g,2),y=w[0],N=w[1],k=(0,a.Nr)(y,150),C=r.useMemo((function(){return f&&k?f(c,k):c}),[c,k,f]);return(0,o.jsx)(l.Z,{isOpen:j,onClose:function(){return b(!1)},id:"settings-button",placement:"bottom-start",matchWidth:!0,buttonContent:(0,o.jsx)("button",{type:"button",onClick:function(){return b((function(e){return!e}))},className:(0,i.cn)("flex items-center space-x-2 rounded-lg bg-white/10 py-3 pl-4 pr-5 text-white/75",t),disabled:v,children:n}),buttonContentClassName:"!w-full",popoverContent:(0,o.jsxs)("div",{className:"mt-1 rounded-lg bg-white/10",children:[f?(0,o.jsx)("div",{className:"sticky top-0 flex",children:(0,o.jsx)("input",{placeholder:"Search...",className:"w-full bg-v2-background-dark px-4 py-2 text-sm text-white !outline-none",value:y,onChange:function(e){return N(e.target.value)}})}):null,C.map((function(e,t){return(0,o.jsx)("button",{onClick:function(){u(e),b(!1)},className:(0,i.cn)("flex w-full items-center space-x-2 py-1.5 pl-4 pr-3 text-white/75 first:pt-3 last:pb-3 hover:bg-shark",m),children:d(e)},t)}))]}),contentClassName:(0,i.cn)("!bg-transparent !shadow-none z-50 webkit-scrollbar",x)})}},82625:function(e,t,n){"use strict";var s=n(72215),r=n(93981),i=n(24201),a=n(54566),l=n(29541);t.Z=function(e){var t=e.value,n=e.tokenAddress,o=e.className,c=(0,s.Bn)().getTokenInfo,d=r.useMemo((function(){return c(n)}),[c,n]);return(0,l.jsx)(l.Fragment,{children:t?(0,l.jsx)("div",{className:(0,i.cn)("text-xs font-medium text-white-25",o),children:d&&(0,l.jsx)(a.default,{tokenInfo:d,amount:Number(t.floatValue)})}):null})}},5564:function(e,t,n){"use strict";n.d(t,{D:function(){return c}});var s=n(63956),r=n(93981),i=n(81097),a=n(25348);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(e){var t=(0,r.useMemo)((function(){return e.filter(Boolean)}),[e]),n=(0,i.j)(t),s=n.data,l=n.isLoading;return{tokensWithTransferFee:(0,r.useMemo)((function(){return null===s||void 0===s?void 0:s.map((function(t){if(t){var n=(0,a.y)(t);if(null!==n.transferFee)return o(o({},e.find((function(e){return(null===e||void 0===e?void 0:e.address)===t.id}))),{},{fee:n.transferFee})}return null})).filter(Boolean)}),[e,s]),dasQuery:s,isLoadingDasQuery:l}}},99384:function(e,t,n){"use strict";var s=n(29541);t.Z=function(e){var t=e.width,n=void 0===t?12:t,r=e.height,i=void 0===r?12:r;return(0,s.jsxs)("svg",{width:n,height:i,viewBox:"0 0 12 12",fill:"inherit",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("g",{clipPath:"url(#clip0_841_4053)",children:(0,s.jsx)("path",{d:"M11.6466 4.23513V0.706082L10.4111 1.94156C9.3173 0.741165 7.72912 0 6 0C2.6827 0 0 2.6827 0 6C0 9.3173 2.68203 12 6 12C7.69405 12 9.21142 11.2939 10.3059 10.165L9.31797 9.14128C8.50601 10.0234 7.30561 10.5879 6 10.5879C3.45892 10.5879 1.41216 8.5411 1.41216 6.00002C1.41216 3.45894 3.45892 1.41218 6 1.41218C7.34135 1.41218 8.57615 2.01238 9.42317 2.92954L8.11757 4.23515L11.6466 4.23513Z",fill:"inherit"})}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"clip0_841_4053",children:(0,s.jsx)("rect",{width:"12",height:"12",fill:"white"})})})]})}},98959:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return lt},default:function(){return ot}});var s=n(97620),r=n(72215),i=n(68586),a=n(93981),l=n(70107),o=n(27195),c=n(8857),d=n.n(c),u=n(8473),x=n(4707),m=n(11823),f=n(56720),v=n(28651),h=n(40993),p=n(25224),j=n(75206),b=n(98777),g=n(7744),w=n(11711),y=n(13838),N=n(3011),k=n(72997),C=n(13215),S=n(87821),Z=n(13170),V=n(72282),O=n(90342),T=n(33130),I=n(42082),M=n(5564),A=n(69667),P=n(9364),D={refetchId:(0,P.cn)(0),isLoading:(0,P.cn)(!1)},B=n(24201),F=n(25546),_=n(89881),L=n(13246),H=n(32044),U=n(57722),K=n(55259),E=n(33118),q=n(6397),W=n(26260),R=n(62146),z=n(10563),G=n(69825),Q=n(95523),Y=n(29541),J=function(e){var t=e.buttons;return(0,Y.jsx)("div",{className:"flex h-9 items-center rounded-lg bg-uiv2 p-1",children:t.map((function(e){var t=e.onChange,n=e.value,s=e.isSelected;return(0,Y.jsx)("button",{type:"button",onClick:t,className:(0,B.cn)("h-7 w-[75px] lg:w-20","flex flex-row items-center justify-center space-x-2 rounded-lg border border-transparent fill-current font-semibold text-v2-lily/50","p-0.5",s?"!bg-v2-primary/10":""),children:(0,Y.jsx)("span",{className:(0,B.cn)("whitespace-nowrap !text-xxs font-semibold md:!text-xs",s?"text-v2-primary":""),children:n})},"".concat(n,"-button"))}))})},X=function(e){var t=e.title,n=e.active,s=e.onClick;return(0,Y.jsx)("button",{type:"button",onClick:s,className:(0,B.cn)("whitespace-nowrap rounded-2xl border border-transparent px-4 py-2 text-xs text-white/20","hover:!text-v2-primary",{"border-v2-primary/20 bg-v2-primary/5 !text-v2-primary":n}),children:(0,Y.jsx)(u.cC,{id:"pDgeaz",values:{title:t}})})},$=function(){return(0,Y.jsx)("svg",{width:"9",height:"10",viewBox:"0 0 9 10",fill:"inherit",xmlns:"http://www.w3.org/2000/svg",children:(0,Y.jsx)("path",{d:"M4.50199 9.2001C5.9011 9.19955 7.22 8.54806 8.07149 7.43792C8.92239 6.3272 9.20858 4.88472 8.84603 3.53331C8.48348 2.18189 7.51283 1.07615 6.2197 0.541774C4.92716 0.00728354 3.4588 0.103964 2.24759 0.80435C1.03634 1.50419 0.220046 2.72811 0.0382167 4.1151C-0.143612 5.50214 0.329903 6.89527 1.31978 7.88401C2.16299 8.72887 3.30837 9.20238 4.502 9.20019L4.50199 9.2001ZM6.89263 7.09072C6.32848 7.65377 5.58305 7.99874 4.78872 8.06521C3.99441 8.13113 3.20232 7.91415 2.55306 7.45217L7.25136 2.74669C7.71444 3.39653 7.93308 4.18923 7.86715 4.98461C7.80178 5.77947 7.45625 6.526 6.89265 7.09076L6.89263 7.09072ZM2.11135 2.30944C2.6755 1.74639 3.42093 1.40142 4.21525 1.33495C5.00956 1.26903 5.80165 1.48601 6.45092 1.94799L1.75261 6.65459C1.28898 6.0053 1.07035 5.21205 1.13628 4.41668C1.20165 3.6207 1.54717 2.87415 2.11132 2.30954L2.11135 2.30944Z",fill:"inherit"})})},ee=n(99384),te=function(e){var t=e.tabs,n=e.activeTab,s=e.setActiveTab,r=e.isLoading,i=e.refetch,a=e.cancelAllOrderDisabled,l=e.cancelAllOrder,o=e.children,c=e.className;return(0,Y.jsx)("div",{className:(0,B.cn)("flex w-full justify-center",c),children:(0,Y.jsxs)("div",{className:"w-full overflow-hidden",children:[(0,Y.jsxs)("div",{className:"flex flex-row flex-wrap",children:[(0,Y.jsx)("div",{className:"flex items-start justify-start space-x-2 overflow-y-auto",children:t.map((function(e){return(0,Y.jsx)(X,{title:e,active:n===e,onClick:function(){return s(e)}},e)}))}),(0,Y.jsxs)("div",{className:"ml-auto flex justify-end space-x-2 text-xs text-white-50",children:[(0,Y.jsx)("button",{type:"button",className:(0,B.cn)("flex items-center rounded-lg border border-white/10 px-3 py-1.5","hover:!border-v2-primary/25 hover:!bg-v2-primary/5 hover:!text-v2-primary"),onClick:i,children:(0,Y.jsx)("div",{className:(0,B.cn)("fill-current",r?"animate-spin":""),children:(0,Y.jsx)(ee.Z,{width:8,height:8})})}),Boolean(l)?(0,Y.jsxs)("button",{type:"button",className:(0,B.cn)("flex items-center rounded-lg border border-white/10 px-3 py-1.5",a?"cursor-disabled !hover:transparent opacity-50":"hover:!border-[#F74A4A]/25 hover:!bg-[#F74A4A]/5 hover:!text-[#F74A4A]"),disabled:a,onClick:l,children:[(0,Y.jsx)("div",{className:"mr-2 fill-current",children:(0,Y.jsx)($,{})}),(0,Y.jsx)(u.cC,{id:"lUDY9v"})]}):null]})]}),o]})})},ne=n(45009),se=n(56100),re=n(64508),ie=n.n(re),ae=n(59978),le=n(45462),oe=n(24628),ce=n(65558),de=n(12627),ue=n(3082),xe=n(70006),me=n(91799),fe=n(40558),ve=n(50269),he=n(3955),pe=function(e){var t=e.account,n=e.vaClient,s=e.showUsdcRate,i=e.outputToken,l=e.inputToken,o=(0,r.Bn)().getTokenInfo,c=(0,r.y6)(),d=c.tokenPriceMap,u=c.getUSDValue;a.useEffect((function(){u([l.address,i.address])}),[l,i,u]);var x=a.useMemo((function(){var e,t;return{inputTokenPrice:new y.Z((null===(e=d[l.address])||void 0===e?void 0:e.usd)||0),outputTokenPrice:d[i.address]?new y.Z((null===(t=d[i.address])||void 0===t?void 0:t.usd)||0):void 0}}),[d,i.address,l.address]),m=x.inputTokenPrice,f=x.outputTokenPrice,v=a.useMemo((function(){if(f)return s?f:f.div(m)}),[s,f,m]),h=a.useMemo((function(){return o(Z.cq.toBase58())||(0,he.Tr)({address:Z.cq.toBase58()})}),[o]),p=t.inUsed,j=t.inDeposited,b=t.inLeft,g=t.incrementUsdcValue,w=t.orderInterval,N=t.outReceived,k=t.outWithdrawn,C=t.estimatedUsdcValueSpent,S=void 0===C?void 0:C,V=t.inWithdrawn,O=a.useMemo((function(){var e=new y.Z(10).pow(l.decimals),t=new y.Z(10).pow(i.decimals),n=new y.Z(10).pow(h.decimals),r=new y.Z(p.toString()).div(e),a=new y.Z(j.toString()).div(e),o=new y.Z(b.toString()).div(e),c=new y.Z(g.toString()).div(n),d=new y.Z(V.toString()).div(e),u=new y.Z(w.toNumber()),x=new y.Z((null===S||void 0===S?void 0:S.toString())||0).div(n),m=new y.Z(N.toString()).div(t),f=(s?x:r).div(m),v=new y.Z(k.toString()).div(t),C=m.minus(v),Z=new y.Z(j.toString()).div(e),O=new y.Z(V.toString()).div(e),T=new y.Z(p.toString()).div(e);return{totalSpent:r,usdcDecimals:n,totalDeposited:a,availableInBalance:o,amountPurchased:m,estimatedUSDCSpent:x,inputTokenWithdrawn:d,incrementValue:c,interval:u,outputDecimals:t,averagePrice:f,availableOutBalance:C,outputTokenWithdrawn:v,inTokenLeft:Z.minus(O).minus(T)}}),[p,j,b,g,w,N,V,S,h,l,i,s,k]),T=O.totalSpent,I=O.totalDeposited,M=O.availableInBalance,A=O.amountPurchased,P=O.estimatedUSDCSpent,D=O.incrementValue,B=O.inputTokenWithdrawn,F=O.interval,_=O.availableOutBalance,L=O.averagePrice,H=O.outputTokenWithdrawn,U=O.inTokenLeft,K=a.useMemo((function(){return v&&"nextOrderAt"in t?1e3*new ce.BN(t.nextOrderAt).toNumber()<Date.now()?y.Z.max(n.computeSupposedUIValue(t).minus(A.mul(v)).toFixed(6),new y.Z("0")):y.Z.max(n.computeSupposedUIValue(t).plus(new y.Z(t.incrementUsdcValue.toString()).div("1000000")).minus(A.mul(v)).toFixed(6),new y.Z("0")):null}),[v,t,A,n]),E=a.useMemo((function(){if(v){var e=v.minus(L).mul(A),t=e.div(s?P:T).mul(100),n=e.greaterThanOrEqualTo(new y.Z(0));return{pnl:e,pnlPercentange:t,isProfit:n}}}),[v,L,A,s,P,T]),q=a.useMemo((function(){var e;if(!K)return!1;var t=new y.Z((null===(e=d[l.address])||void 0===e?void 0:e.usd)||0),n=U.mul(t);return K.gt(n)}),[U,K,l,d]);return{isLowBalance:q,pnlDetails:E,estimatedNextBuyValue:K,availableInBalance:M,inTokenLeft:U,currenTokenPrice:v,amountPurchased:A,totalSpent:T,estimatedUSDCSpent:P,averagePrice:L,incrementValue:D,interval:F,totalDeposited:I,inputTokenWithdrawn:B,availableOutBalance:_,outputTokenWithdrawn:H}},je=n(99438),be=n(12866),ge=function(e){var t=e.vaItem,n=e.inputToken,i=e.outputToken,c=e.vaClient,f=e.closeModal,p=e.type,j=(0,C.cI)({defaultValues:{fromValue:{floatValue:0,formattedValue:void 0,value:void 0},tokenInfo:n},mode:"onChange"}),b=j.control,k=j.handleSubmit,S=j.setValue,Z=j.formState,V=Z.isSubmitting,I=Z.isValid,M=j.trigger,P=t.publicKey,D=t.account,F=D.inLeft,_=D.outWithdrawn,L=D.outReceived,U=(0,r.FB)(n.address).balance,E=new y.Z(10).pow(n.decimals),q=new y.Z(F.toString()).div(E),R=new y.Z(10).pow(i.decimals),z=new y.Z(L.toString()).div(R),G=new y.Z(_.toString()).div(R),Q=z.minus(G),J="Deposit"===p,X=(0,C.qo)({control:b,name:"tokenInfo"}),$=(0,C.qo)({control:b,name:"fromValue"});(0,a.useEffect)((function(){M()}),[$,M]),a.useEffect((function(){S("fromValue",{floatValue:void 0,formattedValue:"",value:""})}),[X,S]);var ee=(0,r.Os)().publicKey,te=(0,w.NL)(),ne=(0,N.KO)(h.yz),se=(0,s.Z)(ne,1)[0],re=(0,r.Rc)(),ie=(0,T.R3)(),ae=(0,O.gs)().priorityLevel,le=a.useMemo((function(){return n.address===(null===X||void 0===X?void 0:X.address)}),[n,X]),oe=a.useCallback((function(){S("fromValue",le?{floatValue:q.toNumber(),formattedValue:q.toString(),value:q.toString()}:{floatValue:Q.toNumber(),formattedValue:Q.toString(),value:Q.toString()})}),[S,le,Q,q]),ce=a.useCallback(function(){var e=(0,o.Z)(d().mark((function e(t){var s,r,i,a,o,x,m,p,j,b;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s=t.fromValue).floatValue||!ee){e.next=18;break}return i=new y.Z(s.floatValue).mul(Math.pow(10,n.decimals)),e.next=5,c.deposit(P,BigInt(i.toFixed(0)),ee,ee);case 5:return a=e.sent,o=a.preInstructions,x=a.depositIx,m=a.postInstructions,e.next=11,re.getLatestBlockhash("confirmed");case 11:return p=e.sent,j=p.blockhash,b=p.lastValidBlockHeight,f(),e.next=17,ie((r=new g.Transaction({feePayer:ee,blockhash:j,lastValidBlockHeight:b})).add.apply(r,[].concat((0,l.Z)(o),[x],(0,l.Z)(m))),{blockhash:j,lastValidBlockHeight:b,idl:v.xO,idlProgramId:new g.PublicKey(v.MG["mainnet-beta"])},{successMessage:(0,Y.jsx)(u.cC,{id:"++OGth"}),submittingMessage:(0,Y.jsx)(u.cC,{id:"d3kTdQ"}),errorMessage:(0,Y.jsx)(u.cC,{id:"d47x3q"}),referenceFee:"MEDIUM"===ae?se.va.m:"HIGH"===ae?se.va.h:"VERY_HIGH"===ae?se.va.vh:void 0,minimumFee:h.uo,requestComputeBudgetLimit:3e5});case 17:te.invalidateQueries({queryKey:["va"]});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,P,ie,ae,se,re,te,ee,n,f]),de=a.useCallback(function(){var e=(0,o.Z)(d().mark((function e(t){var n,s,r,i,a,o,x;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.fromValue).floatValue||!ee){e.next=15;break}return r=new y.Z(n.floatValue).mul(Math.pow(10,X.decimals)),e.next=5,c.withdraw(ee,ee,P,new g.PublicKey(X.address),!0,BigInt(r.toFixed(0)));case 5:return i=e.sent,e.next=8,re.getLatestBlockhash("confirmed");case 8:return a=e.sent,o=a.blockhash,x=a.lastValidBlockHeight,f(),e.next=14,ie((s=new g.Transaction({feePayer:ee,blockhash:o,lastValidBlockHeight:x})).add.apply(s,(0,l.Z)(i)),{blockhash:o,lastValidBlockHeight:x,idl:v.xO,idlProgramId:new g.PublicKey(v.MG["mainnet-beta"])},{successMessage:(0,Y.jsx)(u.cC,{id:"DP/xYv",values:{0:n.floatValue,1:X.symbol}}),submittingMessage:(0,Y.jsx)(u.cC,{id:"Kop9nr"}),errorMessage:(0,Y.jsx)(u.cC,{id:"DKxsWs"}),referenceFee:"MEDIUM"===ae?se.va.m:"HIGH"===ae?se.va.h:"VERY_HIGH"===ae?se.va.vh:void 0,minimumFee:h.uo,requestComputeBudgetLimit:3e5});case 14:te.invalidateQueries({queryKey:["va"]});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[f,re,ie,ae,ee,te,se,c,P,X]),ue=a.useCallback((function(){var e=new y.Z(U);S("fromValue",{floatValue:e.toNumber(),formattedValue:e.toString(),value:e.toString()})}),[S,U]),xe=a.useCallback((function(e){S("fromValue",{floatValue:e.toNumber(),formattedValue:e.toString(),value:e.toString()})}),[S]);return(0,Y.jsx)("div",{className:(0,B.cn)("w-[350px] rounded-2xl md:w-[500px]"),children:(0,Y.jsxs)("form",{onSubmit:k(J?ce:de),className:"flex h-full flex-1 flex-col justify-center",children:[(0,Y.jsxs)("div",{className:"flex items-center justify-between p-6 text-lg font-semibold text-v2-lily",children:[(0,Y.jsx)(u.cC,{id:"J/hVSQ",values:{0:J?"Deposit":"Withdraw"}}),(0,Y.jsx)("div",{className:"cursor-pointer text-v2-lily/25",onClick:f,children:(0,Y.jsx)(be.Z,{width:15,height:15})})]}),(0,Y.jsxs)("div",{className:"flex flex-col gap-2 p-5",children:[(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("div",{className:"text-xs font-semibold text-v2-lily md:text-sm",children:(0,Y.jsx)(u.cC,{id:"s66KOo",values:{0:J?"deposit":"withdraw"}})}),(0,Y.jsx)("div",{className:"flex gap-2",children:J?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)("div",{className:"flex cursor-pointer items-center space-x-1 whitespace-nowrap text-xs font-normal text-v2-lily/50 hover:text-v2-lily",onClick:ue,children:(0,Y.jsx)(H.Z,{tokenInfo:X,className:"hover:text-v2-lily"})}),(0,Y.jsx)(m.oi,{mint:X.address,onBalanceChange:xe,className:"bg-[#151A20]"})]}):(0,Y.jsx)("span",{className:"cursor-pointer text-sm font-semibold text-v2-lily/50 hover:text-v2-primary",onClick:oe,children:le?(0,Y.jsxs)(Y.Fragment,{children:[q.toFixed(n.decimals)," ",n.symbol]}):(0,Y.jsxs)(Y.Fragment,{children:[Q.toFixed(i.decimals)," ",i.symbol]})})})]}),(0,Y.jsxs)("div",{className:"relative flex flex-col space-y-2",children:[!J&&(0,Y.jsx)(C.Qr,{control:b,name:"tokenInfo",render:function(e){var t,s=e.field,r=s.onChange,a=s.value;return(0,Y.jsx)("div",{className:(0,B.cn)("flex h-[56px] w-full items-center rounded-xl bg-[#151A20] px-2","text-sm lg:text-base","group-hover/select:border-v2-active-state group-hover/select:bg-[rgba(199,242,132,0.2)] group-hover/select:shadow-swap-input-dark"),children:(0,Y.jsxs)(W.Z,{onChange:r,className:"flex w-full justify-between !bg-transparent !px-3 !py-1 text-sm !text-v2-lily",data:[n,i],value:a,rowRenderer:function(e){var t;return(0,Y.jsxs)("div",{className:"flex w-full items-center space-x-3",children:[(0,Y.jsx)("img",{src:null!==(t=e.logoURI)&&void 0!==t?t:void 0,alt:"",className:"h-6 w-6 shrink-0 object-contain"}),(0,Y.jsx)("p",{className:"text-sm font-semibold text-white",children:null===e||void 0===e?void 0:e.symbol})]})},children:[(0,Y.jsxs)("div",{className:"flex w-full items-center space-x-3",children:[(0,Y.jsx)("img",{src:null!==(t=X.logoURI)&&void 0!==t?t:void 0,alt:"",className:"h-6 w-6 shrink-0 rounded-2xl object-contain"}),(0,Y.jsx)("div",{children:X.symbol})]}),(0,Y.jsx)("div",{className:"ml-auto fill-current text-white/25 group-hover/select:text-[#00D1DF]",children:(0,Y.jsx)(A.Z,{})})]})})}}),(0,Y.jsx)(C.Qr,{control:b,name:"fromValue",rules:{validate:function(e){if(!e.floatValue)return!1;if(J){if(e.floatValue>Number(U)||0===e.floatValue||void 0===e.floatValue)return x.ag._({id:"lHBCPn",values:{0:n.symbol,balance:U}})}else{var t=le?q:Q;if(e.floatValue>t.toNumber())return x.ag._({id:"k6z/IS"})}}},render:function(e){var t=e.field,s=t.value,r=t.onBlur,i=t.onChange,a=e.fieldState.error;return(0,Y.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,Y.jsx)("div",{className:(0,B.cn)("h-[56px] rounded-xl border border-transparent bg-[#151A20] p-4","w-full focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:(0,Y.jsx)(K.Z,{value:s,onBlur:r,onChange:i,tokenAddress:n.address,name:"fromValue"})}),null!==a&&void 0!==a&&a.message?(0,Y.jsx)("span",{className:"mt-1 text-right text-xs text-perps-red",children:a.message}):null]})}})]}),(0,Y.jsx)(je.Z,{disabled:!I,className:"!bg-[#0F1216]",loading:V,children:(0,Y.jsx)(u.cC,{id:"J/hVSQ",values:{0:J?"Deposit":"Withdraw"}})})]})]})})},we=function(e){var t=e.vaItem,n=e.inputToken,i=e.outputToken,c=e.vaClient,m=e.hideButtons,f=(0,ue.useRouter)().query,y=a.useMemo((function(){return"true"===f.debug}),[f.debug]),k=(0,r.Os)().publicKey,C=(0,r.Bn)().connection,S=(0,T.R3)(),V=(0,xe.JT)(),I=V.openModal,M=V.closeModal,A=(0,w.NL)(),P=(0,N.KO)(h.yz),D=(0,s.Z)(P,1)[0],_=(0,O.gs)().priorityLevel,L=a.useState(!0),H=(0,s.Z)(L,2),U=H[0],K=H[1],E=t.account,q=t.publicKey,W=E.inputMint,R=E.inLeft,z=E.outReceived,G=E.outWithdrawn,Q=E.outputMint,J=E.createdAt,X=pe({account:E,vaClient:c,showUsdcRate:U,inputToken:n,outputToken:i}),$=X.isLowBalance,ee=X.pnlDetails,te=X.averagePrice,ne=X.estimatedUSDCSpent,se=X.totalSpent,re=X.currenTokenPrice,ie=X.amountPurchased,le=X.availableInBalance,oe=X.availableOutBalance,he=X.estimatedNextBuyValue,je=X.incrementValue,be=X.interval,we=X.outputTokenWithdrawn,ye=X.inputTokenWithdrawn,Ne=X.totalDeposited,ke=(0,a.useCallback)((0,o.Z)(d().mark((function e(){var t,s,r,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,k&&q){e.next=3;break}return e.abrupt("return");case 3:if(t=new g.Transaction,!R.gt(new ce.BN(0))){e.next=13;break}return e.t0=t.add,e.t1=t,e.t2=l.Z,e.next=10,c.withdraw(k,k,q,W,!0,void 0,void 0,(0,p.kL)(n)?b.nA:j.H_);case 10:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 13:if(!z.sub(G).gt(new ce.BN(0))){e.next=22;break}return e.t5=t.add,e.t6=t,e.t7=l.Z,e.next=19,c.withdraw(k,k,q,Q,!0,void 0,void 0,(0,p.kL)(i)?b.nA:j.H_);case 19:e.t8=e.sent,e.t9=(0,e.t7)(e.t8),e.t5.apply.call(e.t5,e.t6,e.t9);case 22:return e.t10=t,e.next=25,c.close(k,q);case 25:return e.t11=e.sent,e.t10.add.call(e.t10,e.t11),e.next=29,C.getLatestBlockhash("confirmed");case 29:return s=e.sent,r=s.blockhash,a=s.lastValidBlockHeight,t.recentBlockhash=r,t.lastValidBlockHeight=a,t.feePayer=k,e.next=37,S(t,{blockhash:r,lastValidBlockHeight:a,idl:v.xO,idlProgramId:new g.PublicKey(v.MG["mainnet-beta"])},{errorMessage:x.ag._({id:"YQF2ps"}),submittingMessage:x.ag._({id:"YKgQD4"}),successMessage:x.ag._({id:"NcHf51"}),referenceFee:"MEDIUM"===_?D.va.m:"HIGH"===_?D.va.h:"VERY_HIGH"===_?D.va.vh:void 0,minimumFee:h.uo,requestComputeBudgetLimit:3e5});case 37:A.invalidateQueries({queryKey:["va"]}),e.next=43;break;case 40:e.prev=40,e.t12=e.catch(0),console.log({e:e.t12});case 43:case"end":return e.stop()}}),e,null,[[0,40]])}))),[A,R,C,W,Q,_,q,k,D,S,c,z,G,n,i]),Ce=a.useMemo((function(){return n.address.toString()===Z.cq.toString()}),[n]),Se=a.useCallback((function(){K(!U)}),[U]),Ze=a.useMemo((function(){return n.decimals}),[n]),Ve=a.useMemo((function(){return Ce||U?"USDC":n.symbol}),[U,Ce,n]),Oe=function(e){return I((0,Y.jsx)(ge,{inputToken:n,outputToken:i,vaClient:c,vaItem:t,closeModal:M,type:e}))},Te=a.useMemo((function(){if(y&&"firstOrderAt"in E)return{debugFirstOrderDate:(0,de.Z)(1e3*new ce.BN(E.firstOrderAt).toNumber(),"dd MMM y HH:mm:ss"),debugSecondAfterFirstOrder:Math.round(Date.now()/1e3-E.firstOrderAt.toNumber()),debugNumberOfOrders:c.computeSupposedNumberOfOrders(E),debugSupposedUIValue:c.computeSupposedUIValue(E).toFixed(0),debugCurrentInvestedValue:re?ie.mul(re).toString():void 0,debugSupposedInvestValue:re?c.computeSupposedUIValue(E).minus(ie.mul(re)).toString():void 0}}),[E,c,re,ie,y]);return(0,Y.jsxs)("div",{className:"bg-history-expanded p-6 text-xs",children:[(0,Y.jsxs)("div",{className:"space-y-2 rounded-lg border border-v2-lily/5 bg-v2-lily/5 p-5",children:[(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{className:"text-white/50",children:x.ag._({id:"vVCmxH"})}),(0,Y.jsxs)("span",{className:"text-v2-lily/[.75]",children:[se.toString()," ",n.symbol," ",W.equals(Z.cq)?"":(0,Y.jsxs)(Y.Fragment,{children:["/ ",(0,Y.jsxs)("span",{className:"italic",children:["~",ne.toFixed(2)," USDC"]})]})]})]}),(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{className:"text-white/50",children:x.ag._({id:"8DIDYI"})}),(0,Y.jsxs)("span",{className:"text-v2-lily/[.75]",children:[ie.toString()," ",i.symbol]})]}),(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{className:"text-white/50",children:x.ag._({id:"9enJiG"})}),te.isNaN()?(0,Y.jsx)(Y.Fragment,{children:"-"}):(0,Y.jsx)("span",{className:"cursor-pointer text-v2-lily/[.75] hover:text-v2-primary",onClick:Se,children:(0,Y.jsxs)(Y.Fragment,{children:[te.toFixed(Ze)," ",Ve]})})]}),(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{className:"text-white/50",children:x.ag._({id:"cb5PbI",values:{0:i.symbol}})}),(0,Y.jsx)("span",{className:"cursor-pointer text-v2-lily/[.75] hover:text-v2-primary",onClick:Se,children:re?(0,Y.jsxs)(Y.Fragment,{children:[re.toFixed(Ze)," ",Ve]}):(0,Y.jsx)(u.cC,{id:"fj5byd"})})]}),(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{className:"text-white/50",children:x.ag._({id:"OaBqjF"})}),ee?(0,Y.jsx)(Y.Fragment,{children:ee.pnl.isNaN()?(0,Y.jsx)(Y.Fragment,{children:"-"}):(0,Y.jsxs)("span",{className:(0,B.cn)("cursor-pointer",ee.isProfit?"text-perps-green":"text-perps-red"),onClick:Se,children:[ee.pnl.toFixed(Ze)," ",Ve," /"," ",ee.pnlPercentange.isNaN()?(0,Y.jsx)(Y.Fragment,{children:"-"}):ee.pnlPercentange.toFixed(2),"%"]})}):(0,Y.jsx)("div",{className:"text-v2-lily/[.75]",children:(0,Y.jsx)(u.cC,{id:"fj5byd"})})]})]}),(0,Y.jsxs)("div",{className:"mt-5 space-y-3 text-v2-lily/30",children:[(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{children:x.ag._({id:"oS2F65"})}),(0,Y.jsxs)("div",{className:"flex space-x-1",children:[(0,Y.jsx)(ae.Z,{info:i,width:16,height:16}),(0,Y.jsx)("span",{children:i.symbol})]})]}),(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{children:x.ag._({id:"bMrdQu"})}),(0,Y.jsxs)("span",{children:[je.toString()," USD"]})]}),(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{children:x.ag._({id:"0Xa99f"})}),(0,Y.jsx)("span",{children:x.ag._({id:"czuIvq",values:{0:(0,F.FM)(be.toNumber())}})})]}),(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{children:x.ag._({id:"88kg0+"})}),(0,Y.jsx)("div",{className:"flex space-x-1",children:(0,de.Z)(1e3*new ce.BN(J).toNumber(),"dd MMM y HH:mm:ss")})]}),"nextOrderAt"in E?(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{children:x.ag._({id:"bV0wGI"})}),(0,Y.jsx)("div",{className:"flex space-x-1",children:(0,de.Z)(1e3*new ce.BN(E.nextOrderAt).toNumber(),"dd MMM y HH:mm:ss")})]}):null,he?(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{children:x.ag._({id:"Fn7xQn"})}),(0,Y.jsx)("div",{className:"flex space-x-1",children:"".concat(he," USD")})]}):null,null!==Te&&void 0!==Te&&Te.debugFirstOrderDate?(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{children:x.ag._({id:"Zb0Pgx"})}),(0,Y.jsx)("div",{className:"flex space-x-1",children:Te.debugFirstOrderDate})]}):null,null!==Te&&void 0!==Te&&Te.debugSecondAfterFirstOrder?(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{children:x.ag._({id:"Nm9X6x"})}),(0,Y.jsx)("div",{className:"flex space-x-1",children:Te.debugSecondAfterFirstOrder})]}):null,null!==Te&&void 0!==Te&&Te.debugNumberOfOrders?(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{children:x.ag._({id:"556Gyt"})}),(0,Y.jsx)("div",{className:"flex space-x-1",children:Te.debugNumberOfOrders})]}):null,null!==Te&&void 0!==Te&&Te.debugSupposedUIValue?(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{children:x.ag._({id:"LkrbL6"})}),(0,Y.jsx)("div",{className:"flex space-x-1",children:Te.debugSupposedUIValue})]}):null,null!==Te&&void 0!==Te&&Te.debugCurrentInvestedValue?(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{children:x.ag._({id:"n12HiX"})}),(0,Y.jsx)("div",{className:"flex space-x-1",children:Te.debugCurrentInvestedValue})]}):null,null!==Te&&void 0!==Te&&Te.debugSupposedInvestValue?(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{children:x.ag._({id:"ne/fL9"})}),(0,Y.jsx)("div",{className:"flex space-x-1",children:Te.debugSupposedInvestValue})]}):null,y&&"isStale"in E?(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{children:x.ag._({id:"1ba70W"})}),(0,Y.jsx)("div",{className:"flex space-x-1",children:E.isStale?"yes":"no"})]}):null,(0,Y.jsx)(me.Z,{}),(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{children:x.ag._({id:"2r2h/U"})}),(0,Y.jsxs)("span",{children:[Ne.toString()," ",n.symbol]})]}),(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{children:x.ag._({id:"D+JTK+"})}),(0,Y.jsxs)("span",{children:[ye.toString()," ",n.symbol]})]}),(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{}),(0,Y.jsxs)("span",{children:[we.toString()," ",i.symbol]})]}),(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{children:x.ag._({id:"acvFCG"})}),(0,Y.jsxs)("div",{className:"flex gap-1",children:[(0,Y.jsxs)("span",{children:[le.toString()," ",n.symbol]}),$&&(0,Y.jsxs)("span",{className:"flex items-center text-warning",children:[(0,Y.jsx)(u.cC,{id:"cqsPzh"}),(0,Y.jsx)(fe.Z,{variant:"dark",offset:[16,2.5],content:(0,Y.jsx)("span",{className:"flex max-w-[10rem] rounded-lg text-xs text-white-75",children:(0,Y.jsx)(u.cC,{id:"1BIgiV",values:{0:n.symbol}})}),children:(0,Y.jsx)("div",{className:"ml-1 flex items-center fill-current text-white/30",children:(0,Y.jsx)(ve.Z,{height:12,width:12,color:"#FAA63C"})})})]})]})]}),(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{}),(0,Y.jsxs)("span",{children:[oe.toString()," ",i.symbol]})]})]}),!m&&(0,Y.jsxs)("div",{className:"mt-6 flex w-full flex-col space-y-2",children:[(0,Y.jsxs)("div",{className:"mb-2 flex gap-4",children:[(0,Y.jsx)("button",{onClick:function(){return Oe("Deposit")},type:"button",className:"from-[rgba(199,242,132,1))] w-full rounded-lg border border-v2-lily/10 bg-[#121D28] to-[rgba(0,190,240,1)] px-4 py-1.5 text-sm text-white hover:border hover:border-v2-primary hover:bg-v2-primary/5 hover:bg-gradient-to-r",children:x.ag._({id:"kj3M8S"})}),(0,Y.jsx)("button",{onClick:function(){return Oe("Withdraw")},type:"button",className:"from-[rgba(199,242,132,1))] w-full rounded-lg border border-v2-lily/10 bg-[#121D28] to-[rgba(0,190,240,1)] px-4 py-1.5 text-sm text-white hover:border hover:border-v2-primary hover:bg-v2-primary/5 hover:bg-gradient-to-r",children:x.ag._({id:"OsyKSt"})})]}),(0,Y.jsx)("button",{onClick:ke,type:"button",className:"from-[rgba(199,242,132,1))] w-full rounded-lg border border-v2-lily/10 bg-[#121D28] to-[rgba(0,190,240,1)] px-4 py-1.5 text-sm text-white hover:border hover:border-v2-primary hover:bg-v2-primary/5 hover:bg-gradient-to-r",children:R.gt(new ce.BN(0))?x.ag._({id:"GPQ1MS"}):x.ag._({id:"iF8n53"})})]})]})},ye=n(88381),Ne=function(e){var t=e.vaClient,n=e.vaItem,s=e.history,i=e.inverseRate,l=e.setInverseRate,o=(0,ue.useRouter)().query,c=a.useMemo((function(){return"true"===o.debug}),[o.debug]),d=s.inputMint,u=s.outputMint,x=s.inputAmount,m=s.outputAmount,f=s.totalOutputBeforeFill,v=s.txSignature,h=s.confirmedAt,p=s.value,j=(0,r.Bn)().getTokenInfo,b=(0,r.oP)().getExplorer,g=n.account,w=g.firstOrderAt,N=g.orderInterval,k=g.incrementUsdcValue,C=a.useMemo((function(){return{fromTokenInfo:j(d.toString()),toTokenInfo:j(u.toString())}}),[j,d,u]),S=C.fromTokenInfo,Z=C.toTokenInfo,V=a.useMemo((function(){return S?new y.Z(x).div(Math.pow(10,S.decimals)).toString():""}),[S,x]),O=a.useMemo((function(){return{formattedOutAmount:Z?new y.Z(m).div(Math.pow(10,Z.decimals)).toString():"",formattedTotalOutputBeforeFill:Z?new y.Z(f).div(Math.pow(10,Z.decimals)).toString():""}}),[Z,m,f]),T=O.formattedOutAmount,I=O.formattedTotalOutputBeforeFill,M=a.useMemo((function(){return{formattedConfirmedAt:(0,de.Z)(h,"dd MMM y HH:mm"),supposedUiValue:w?t.computeSupposedUIValue(new Date(1e3*w.toNumber()),h,N.toNumber(),k).toFixed():"N/A"}}),[h,t,w,N,k]),A=M.formattedConfirmedAt,P=M.supposedUiValue,D=a.useMemo((function(){return b(v)}),[b,v]),B=a.useMemo((function(){var e=new y.Z(p).div("1000000"),t=Z?new y.Z(m).div(Math.pow(10,Z.decimals)):new y.Z(0),n=Z?new y.Z(e).div(t).toFixed(6):new y.Z(0).toFixed(0),s=new y.Z(I).mul(n),r=s.plus(e);return{uiValue:e.toFixed(6),approxUSDCPrice:n,approxUSDCValueBeforeFill:s.toFixed(6),approxUSDCValueAfterFill:r.toFixed(6)}}),[p,Z,m,I]),F=B.uiValue,_=B.approxUSDCPrice,L=B.approxUSDCValueBeforeFill,H=B.approxUSDCValueAfterFill,U=(0,a.useMemo)((function(){if(!S||!Z)return new y.Z(0);var e=new y.Z(m).div(Math.pow(10,Z.decimals)),t=new y.Z(x).div(Math.pow(10,S.decimals));return e.div(t)}),[S,x,m,Z]);return(0,Y.jsxs)("div",{className:"flex justify-between space-x-4 text-xs",children:[(0,Y.jsxs)("span",{className:"flex w-[80px] items-center space-x-1 text-v2-lily/50",children:[(0,Y.jsx)(ye.ZP,{value:Number(V)}),(0,Y.jsx)(ae.Z,{info:S,width:16,height:16})]}),c?(0,Y.jsx)("span",{className:"flex w-[120px] items-center space-x-1 text-v2-lily/50",children:(0,Y.jsxs)("span",{children:[F," USD"]})}):null,c?(0,Y.jsx)("span",{className:"flex w-[120px] items-center space-x-1 text-v2-lily/50",children:(0,Y.jsxs)("span",{children:[L," USD"]})}):null,c?(0,Y.jsx)("span",{className:"flex w-[120px] items-center space-x-1 text-v2-lily/50",children:(0,Y.jsxs)("span",{children:[H," USD"]})}):null,c?(0,Y.jsx)("span",{className:"flex w-[120px] items-center space-x-1 text-v2-lily/50",children:(0,Y.jsxs)("span",{children:[P," USD"]})}):null,c?(0,Y.jsx)("span",{className:"flex w-[120px] items-center space-x-1 text-v2-lily/50",children:(0,Y.jsxs)("span",{children:[_," USD"]})}):null,(0,Y.jsx)("span",{className:"flex w-[80px] cursor-pointer items-center text-v2-lily/50 hover:text-v2-primary",onClick:function(){return l(!i)},children:U.gt(0)?i?(0,ye.M)({value:+new y.Z(1).div(U).toSignificantDigits(3)}):(0,ye.M)({value:+U.toSignificantDigits(3)}):"N/A"}),(0,Y.jsxs)("span",{className:"flex w-[100px] items-center space-x-1",children:[(0,Y.jsx)(ye.ZP,{value:Number(T)}),(0,Y.jsx)(ae.Z,{info:Z,width:16,height:16})]}),(0,Y.jsx)("span",{className:"flex w-[120px] items-center text-v2-lily/50",children:A}),(0,Y.jsx)("div",{className:"flex w-3 items-center",children:(0,Y.jsx)("a",{href:D,target:"_blank",rel:"noreferrer",className:"h-5 w-3 text-xs text-v2-lily/50 hover:text-v2-primary",children:(0,Y.jsx)(oe.Z,{width:12,height:20})})})]})},ke=function(e){var t=e.history,n=e.vaClient,r=e.vaItem,i=(0,ue.useRouter)().query,l=a.useMemo((function(){return"true"===i.debug}),[i.debug]),o=a.useState(!0),c=(0,s.Z)(o,2),d=c[0],u=c[1];return(0,Y.jsxs)("div",{className:"min-h-[300px] bg-history-expanded p-6",children:[(0,Y.jsxs)("div",{className:"flex w-full justify-between space-x-4 text-xs text-v2-lily/50",children:[(0,Y.jsx)("span",{className:"w-[80px]",children:x.ag._({id:"ejVYRQ"})}),l?(0,Y.jsx)("span",{className:"w-[120px]",children:x.ag._({id:"wMHvYH"})}):null,l?(0,Y.jsx)("span",{className:"w-[120px]",children:x.ag._({id:"LnSAvE"})}):null,l?(0,Y.jsx)("span",{className:"w-[120px]",children:x.ag._({id:"vQDsbJ"})}):null,l?(0,Y.jsx)("span",{className:"w-[120px]",children:x.ag._({id:"nBfHls"})}):null,l?(0,Y.jsx)("span",{className:"w-[120px]",children:x.ag._({id:"ebh6b9"})}):null,(0,Y.jsx)("span",{className:"w-[80px]",children:x.ag._({id:"fqDzSu"})}),(0,Y.jsx)("span",{className:"w-[100px]",children:x.ag._({id:"/jQctM"})}),(0,Y.jsx)("span",{className:"w-[120px]",children:x.ag._({id:"nYfwRw"})}),(0,Y.jsx)("div",{className:"w-3"})]}),(0,Y.jsx)("div",{className:"hideScrollbar mt-3 max-h-[300px] space-y-3 overflow-y-auto",children:t&&t.length>0?t.map((function(e){return(0,Y.jsx)(Ne,{vaClient:n,vaItem:r,history:e,inverseRate:d,setInverseRate:u},e.txSignature)})):(0,Y.jsx)("div",{className:"mt-4 flex items-center justify-center text-xs text-v2-lily/50",children:x.ag._({id:"7MClw4"})})})]})},Ce=function(e){var t=e.vaItem,n=e.vaClient,i=e.isClosedVA,l=(0,a.useState)(!1),o=l[0],c=l[1],d=(0,a.useState)("Overview"),m=d[0],f=d[1],v=(0,N.KO)(D.refetchId),h=(0,s.Z)(v,1)[0],p=(0,r.Os)().publicKey,j=(0,r.Bn)().getTokenInfo,b=t.account,g=t.publicKey,w=b.inputMint,y=b.outputMint,k=(0,r.oP)().getExplorer,C=(0,a.useMemo)((function(){return k(g.toString(),"account")}),[k,g]),S=j(w.toString())||(0,he.Tr)({address:w.toString()}),Z=j(y.toString())||(0,he.Tr)({address:y.toString()}),V=pe({account:b,vaClient:n,showUsdcRate:!0,inputToken:S,outputToken:Z}),O=V.isLowBalance,T=V.pnlDetails,I=V.inTokenLeft,M=(0,ne.a)(["va-fill-history",null===p||void 0===p?void 0:p.toString(),g.toString(),h],(function(){return g?n.getFillHistory(g):[]}),{keepPreviousData:!0}).data;return(0,Y.jsxs)("div",{className:"mb-2 rounded-lg bg-dca-item",children:[(0,Y.jsxs)("button",{className:"flex h-[64px] w-full items-center justify-between px-2 text-xs md:grid md:grid-cols-3 md:px-4",onClick:function(){return c((function(e){return!e}))},children:[(0,Y.jsxs)("div",{className:"flex basis-2/12 items-center space-x-1 text-left md:space-x-2",children:[(0,Y.jsxs)("div",{className:"flex cursor-pointer items-center -space-x-2",children:[(0,Y.jsx)("div",{className:"flex h-5 w-5 items-center",children:(0,Y.jsx)(ae.Z,{info:S,height:16,width:16})}),(0,Y.jsx)("div",{className:"flex h-5 w-5 items-center",children:(0,Y.jsx)(ae.Z,{info:Z,height:16,width:16})})]}),(0,Y.jsxs)("div",{className:"flex items-center justify-center space-x-1.5 text-xxs text-white sm:text-xs",children:[(0,Y.jsx)("span",{children:S.symbol}),(0,Y.jsx)("div",{className:"fill-current text-v2-lily/50",children:(0,Y.jsx)(le.Z,{width:10,height:10})}),(0,Y.jsx)("span",{children:Z.symbol})]}),(0,Y.jsx)(ie(),{href:C,target:"_blank",className:"text-v2-lily/50 hover:text-v2-primary",children:(0,Y.jsx)(oe.Z,{width:12,height:20})})]}),(0,Y.jsxs)("div",{children:[(!O||!(0,F.tq)())&&(0,Y.jsxs)("div",{className:"text-white/[.75]",children:[I.toString()," ",S.symbol]}),O&&!i&&(0,Y.jsx)("div",{className:"text-warning",children:(0,Y.jsx)(u.cC,{id:"QOu+Km"})})]}),(0,Y.jsxs)("div",{className:"flex justify-end space-x-4 sm:min-w-[170px]",children:[T?(0,Y.jsx)("div",{children:T.pnl.isNaN()?(0,Y.jsx)("div",{className:"px-2 text-v2-lily/[.75]",children:"-"}):(0,Y.jsxs)("div",{className:(0,B.cn)("flex gap-1",T.isProfit?"text-perps-green":"text-perps-red"),children:[(0,F.tq)()?null:(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)("span",{children:[T.pnl.toFixed(2)," USDC"]}),(0,Y.jsx)("span",{children:"/"})]}),(0,Y.jsxs)("span",{children:[T.pnlPercentange.isNaN()?(0,Y.jsx)(Y.Fragment,{children:"-"}):T.pnlPercentange.toFixed(2),"%"]})]})}):(0,Y.jsx)("div",{className:"px-2 text-v2-lily/[.75]",children:(0,Y.jsx)(u.cC,{id:"fj5byd"})}),(0,Y.jsx)("div",{className:(0,B.cn)(["mr-2 fill-current text-v2-lily/[.35]",o?"":"-rotate-90"]),children:(0,Y.jsx)(A.Z,{width:8,height:8})})]})]}),(0,Y.jsxs)("div",{className:(0,B.cn)("overflow-hidden rounded-b-lg bg-dca-item transition-max-height duration-200",o?"animate-fade-in":"max-h-0 animate-fade-out"),children:[(0,Y.jsxs)("div",{className:"flex space-x-2 px-2 text-sm md:space-x-4 md:px-4",children:[(0,Y.jsx)("button",{type:"button",onClick:function(){return f("Overview")},className:(0,B.cn)("border-b-2 border-transparent p-3 text-v2-lily/50","Overview"===m?"border-b-v2-primary font-semibold text-white":""),children:x.ag._({id:"6/dCYd"})}),(0,Y.jsx)("button",{type:"button",onClick:function(){return f("Orders")},className:(0,B.cn)("border-b-2 border-transparent p-3 text-v2-lily/50","Orders"===m?"border-b-v2-primary font-semibold text-white":""),children:(0,Y.jsx)(u.cC,{id:"TciGqZ",values:{0:null!==M&&void 0!==M&&M.length?"(".concat(null===M||void 0===M?void 0:M.length,")"):""}})})]}),"Overview"===m?(0,Y.jsx)(we,{vaItem:t,inputToken:S,outputToken:Z,vaClient:n,hideButtons:i}):null,"Orders"===m?(0,Y.jsx)(ke,{history:M,vaClient:n,vaItem:t}):null]})]})},Se=function(e){var t=e.vaClient,n=(0,r.Os)().publicKey,i=(0,N.KO)(D.refetchId),l=(0,s.Z)(i,1)[0],c=(0,N.KO)(D.isLoading),u=(0,s.Z)(c,2),m=u[0],f=u[1],v=(0,r.gZ)().fetchTokenAccounts,h=(0,ne.a)(["va",null===n||void 0===n?void 0:n.toString(),l],(0,o.Z)(d().mark((function e(){var s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=3;break}return e.abrupt("return");case 3:return f(!0),e.next=6,t.getCurrentByUser(n);case 6:return s=e.sent,e.abrupt("return",s.sort((function(e,t){return t.account.createdAt.toNumber()-e.account.createdAt.toNumber()})));case 8:return e.prev=8,f(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[0,,8,11]])}))),{enabled:Boolean(n),keepPreviousData:!0}).data;return(0,a.useEffect)((function(){if(h){var e=new Set(h.flatMap((function(e){return[e.account.outputMint.toString(),e.account.inputMint.toString()]})));v(Array.from(e))}}),[h,v]),(0,Y.jsxs)("div",{className:"relative mt-3",children:[m&&!h&&(0,Y.jsx)(se.O,{className:"mt-2"}),h&&h.length>0?(0,Y.jsx)("div",{className:"hideScrollbar w-full overflow-x-auto border-white/5",children:h&&(null===h||void 0===h?void 0:h.map((function(e){return(0,Y.jsx)(Ce,{vaItem:e,vaClient:t},e.publicKey.toString())})))}):null,h&&h.length>0&&m?(0,Y.jsx)("div",{className:"absolute inset-y-0 left-0 min-h-[620px] w-full bg-black/10 backdrop-blur-sm"}):null,0===(null===h||void 0===h?void 0:h.length)?(0,Y.jsx)("div",{className:"flex h-full min-h-[180px] w-full items-center justify-center rounded-lg border border-v2-lily/10 bg-v2-lily/5 text-sm text-white/20",children:(0,Y.jsx)("span",{children:x.ag._({id:"14NA+n"})})}):null]})},Ze=function(e){var t=e.vaClient,n=(0,r.Os)().publicKey,i=(0,N.KO)(D.refetchId),a=(0,s.Z)(i,1)[0],l=(0,N.KO)(D.isLoading),c=(0,s.Z)(l,2),u=c[0],m=c[1],f=(0,ne.a)(["vaClosed",null===n||void 0===n?void 0:n.toString(),a],(0,o.Z)(d().mark((function e(){var s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,m(!0),n){e.next=4;break}return e.abrupt("return",[]);case 4:return e.next=6,t.getClosedByUser(n);case 6:return s=e.sent,e.abrupt("return",s);case 8:return e.prev=8,m(!1),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[0,,8,11]])}))),{keepPreviousData:!0,enabled:Boolean(n)}).data;return(0,Y.jsxs)("div",{className:"relative mt-3",children:[u&&!f&&(0,Y.jsx)(se.O,{className:"mt-2"}),f&&f.length>0?(0,Y.jsx)("div",{className:"hideScrollbar mt-3 w-full overflow-x-auto border-white/5",children:f&&(null===f||void 0===f?void 0:f.map((function(e){return e?(0,Y.jsx)(Ce,{vaItem:e,vaClient:t,isClosedVA:!0},e.publicKey.toString()):null})))}):null,f&&f.length>0&&u?(0,Y.jsx)("div",{className:"absolute left-0 top-0 min-h-[620px] w-full bg-black/10 backdrop-blur-sm"}):null,0===(null===f||void 0===f?void 0:f.length)?(0,Y.jsx)("div",{className:"flex h-full min-h-[180px] w-full items-center justify-center rounded-lg border border-v2-lily/10 bg-v2-lily/5 text-sm text-white/20",children:(0,Y.jsx)("span",{children:x.ag._({id:"sRO2CQ"})})}):null]})},Ve=n(67768),Oe=n(57917),Te=n(37124),Ie=function(e){var t=e.loading,n=e.disabled,s=e.isAccountFrozen,r=e.toastId,i=e.isToken2022,l=e.hasEnoughBalance,o=(0,a.useState)(""),c=o[0],d=o[1],x=(0,a.useState)(null),m=x[0],f=x[1],v=(0,Oe.kH)(r),h=v.isProcessing,p=v.isTxProcessed,j=v.isWaitingWalletToSign,b=(0,a.useCallback)((function(e){d("opacity-0"),setTimeout((function(){f(e),d("opacity-100")}),200)}),[]),g=(0,a.useMemo)((function(){return i?(0,Y.jsx)(u.cC,{id:"4vEY9N"}):l?!!s&&(0,Y.jsx)(u.cC,{id:"DtetjN"}):(0,Y.jsx)(u.cC,{id:"znqB4T"})}),[i,l,s]);return(0,a.useEffect)((function(){b(t?p?(0,Y.jsx)(u.cC,{id:"zisYnV"}):j?(0,Y.jsx)(u.cC,{id:"fNEu19"}):h?(0,Y.jsx)(u.cC,{id:"vrnnn9"}):(0,Y.jsx)(u.cC,{id:"S+De3s"}):(0,Y.jsx)(u.cC,{id:"Gyxbvb"}))}),[t,h,p,j,b]),(0,Y.jsx)(Te.Z,{disabled:n||t,loading:t,type:"submit",children:(0,Y.jsx)("span",{className:(0,Ve.cn)("duration-200",c),children:g?(0,Y.jsx)(u.cC,{id:"0ZecgP",values:{shouldShowError:g}}):m})})},Me=n(53636),Ae=n(28940),Pe=n(55948),De=n(43723),Be=function(e){var t=e.fromValue,n=e.fromTokenInfo,s=e.toTokenInfo,r=e.increaseBy,i=e.intervalNumber,a=e.period,l=e.startAt,o=(0,Ae.Z)(),c=o.showSummary,d=o.toggleSummary;return(0,Y.jsxs)("div",{className:"w-full",children:[(0,Y.jsx)("div",{className:"mb-4 mt-3 flex items-center justify-center",children:(0,Y.jsxs)("button",{type:"button",onClick:d,className:"flex cursor-pointer items-center space-x-2 text-white/25 hover:text-v2-primary",children:[(0,Y.jsx)("div",{className:"flex h-4 w-4 items-center fill-current",children:c?(0,Y.jsx)(De.Z,{}):(0,Y.jsx)(Pe.Z,{})}),(0,Y.jsx)("span",{className:"text-xs font-medium",children:(0,Y.jsx)(u.cC,{id:"qZG5kl"})})]})}),c&&(0,Y.jsx)("div",{className:"mt-3 w-full rounded-lg border border-v2-lily/10 p-5 text-xs",children:(0,Y.jsxs)("div",{className:"space-y-1",children:[(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{className:"text-white/50",children:x.ag._({id:"Du/eK3"})}),(0,Y.jsxs)("span",{className:"text-white/[.75]",children:[(0,Y.jsx)(Me.Z,{currency:!1,value:t.floatValue||"-"})," ",null===n||void 0===n?void 0:n.symbol]})]}),(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{className:"text-white/50",children:x.ag._({id:"GtPYOF"})}),(0,Y.jsx)("span",{className:"text-white/[.75]",children:null===s||void 0===s?void 0:s.symbol})]}),(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{className:"text-white/50",children:x.ag._({id:"zyOaUi"})}),(0,Y.jsxs)("span",{className:"text-white/[.75]",children:[(0,Y.jsx)(Me.Z,{currency:!1,value:r.floatValue||"-"})," ","USD"]})]}),(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{className:"text-white/50",children:x.ag._({id:"CRsuq4"})}),(0,Y.jsx)("span",{className:"text-white/[.75]",children:"".concat(i.floatValue," ").concat(a)})]}),(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{className:"text-white/50",children:x.ag._({id:"WAjFYI"})}),(0,Y.jsx)("span",{className:"text-white/[.75]",children:l?(0,de.Z)(l,"d, MMM y, p"):"Now"})]}),(0,Y.jsxs)("div",{className:"flex justify-between",children:[(0,Y.jsx)("span",{className:"text-white/50",children:x.ag._({id:"J3lhKT"})}),(0,Y.jsx)("span",{className:"font-bold text-v2-primary",children:"0.1%"})]}),(0,Y.jsxs)("div",{className:"bg-black/15 mt-3 rounded-lg border border-white/[.15] bg-white/5 px-4 py-3 text-xs text-white/75",children:[(0,Y.jsx)(u.cC,{id:"egVHzO"}),(0,Y.jsx)("a",{className:"ml-1 cursor-pointer underline",href:"https://station.jup.ag/guides/va/how-va-work",target:"_blank",children:x.ag._({id:"zwWKhA"})})]})]})})]})},Fe=n(63956);function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){(0,Fe.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var He=function(e){var t=e.incrementAmount,n=e.toTokenAddress,s=a.useMemo((function(){var e=new Date;return new URLSearchParams({address:n,type:"1D",time_to:(e.getTime()/1e3).toFixed(0),time_ago:"SIX_MONTHS",round_off_epoch:"300"})}),[n]),r=(0,ne.a)(["va_back_test",s.toString()],(0,o.Z)(d().mark((function e(){var t,n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://birdeye-proxy.jup.ag/defi/ohlcv","?").concat(s.toString()));case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("HTTP ERROR");case 6:return e.next=8,t.json();case 8:return n=e.sent,r=n.data.items,e.abrupt("return",r);case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])}))),{keepPreviousData:!0}),i=r.data,l=r.isFetching;return{data:a.useMemo((function(){if(i&&0!==i.length&&0!==t){var e=[],n=new y.Z(0),s=new y.Z(0),r=new y.Z(0),a=0;i.forEach((function(i){r=r.add(new y.Z(t));var l=new y.Z(i.c),o=s.mul(l),c=r.minus(o);if(c.gt(0)){a++;var d=c.div(l);s=s.add(d),n=n.add(c),e.push(Le(Le({},i),{},{buyDetails:{spent:c,boughtAmount:d,purchasedPrice:l,purchasedDate:i.unixTime,totalInvestment:s,totalSpent:n}}))}else e.push(Le(Le({},i),{},{buyDetails:null}))}));var l=i[i.length-1].c,o=s.mul(l),c=n.div(s),d=s,u=o.minus(n),x=u.mul(100).div(n);return{priceData:e,averagePrice:c,totalToken:d,pnl:u,pnlPercentage:x,totalSpent:n,numberOfBuys:a,currentInvestmentValue:o}}}),[i,t]),isLoading:l}},Ue=n(82838),Ke=n(74925),Ee=n(82948),qe=n(31242),We=n(39913),Re=n(76419),ze=n(69551),Ge=n(89349),Qe=n(49334),Ye=n(37030),Je=n(19488),Xe=n(88451),$e=function(e){var t=e.priceData,n=e.averagePrice,r=e.toTokenInfo,i=r.decimals,l=r.symbol,o=Math.max.apply(null,t.map((function(e){var t;return(null===(t=e.buyDetails)||void 0===t?void 0:t.boughtAmount.toNumber())||0}))),c=function(e){var t=e.cx,n=e.cy,s=e.payload,r=e.width;if(!s.buyDetails)return null;var a=s.buyDetails.boughtAmount/o*40+15;return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(Ue.o,{cx:t,cy:n,r:a,fill:"#E8F9FF26"}),r?(0,Y.jsx)("g",{children:(0,Y.jsx)("text",{fontSize:10,fontWeight:500,x:t,y:n,fill:"#fff",textAnchor:"middle",dominantBaseline:"middle",children:F.uf.format(s.buyDetails.boughtAmount,i)})}):null]})},d=function(e){var t=e.active,n=e.payload;if(t&&n&&n.length&&n[0].payload.buyDetails){var s=n[0].payload.buyDetails;return(0,Y.jsxs)("div",{className:"border-v2-/5 flex min-w-[250px] flex-col rounded-lg border bg-v3 px-3 py-2",children:[(0,Y.jsx)("span",{className:"text-sm font-semibold",children:"Order Details"}),(0,Y.jsxs)("div",{className:"flex justify-between text-xs text-v2-lily/50",children:[(0,Y.jsx)("div",{children:"Date"}),(0,Y.jsx)("div",{children:(0,de.Z)(1e3*s.purchasedDate,"dd/MM/yy")})]}),(0,Y.jsxs)("div",{className:"flex justify-between text-xs text-v2-lily/50",children:[(0,Y.jsx)("div",{children:"Spent"}),(0,Y.jsxs)("div",{children:[F.uf.format(s.spent,6)," USD"]})]}),(0,Y.jsxs)("div",{className:"flex justify-between text-xs text-v2-lily/50",children:[(0,Y.jsx)("div",{children:"Bought"}),(0,Y.jsxs)("div",{children:[F.uf.format(s.boughtAmount,i)," ",l]})]}),(0,Y.jsxs)("div",{className:"flex justify-between text-xs text-v2-lily/50",children:[(0,Y.jsx)("div",{children:"Purchased Price"}),(0,Y.jsxs)("div",{children:[F.uf.format(s.purchasedPrice,6)," USD"]})]}),(0,Y.jsxs)("div",{className:"flex justify-between text-xs text-v2-lily/50",children:[(0,Y.jsx)("div",{children:"Cummulative Bought"}),(0,Y.jsxs)("div",{children:[F.uf.format(s.totalInvestment,i)," ",l]})]}),(0,Y.jsxs)("div",{className:"flex justify-between text-xs text-v2-lily/50",children:[(0,Y.jsx)("div",{children:"Cummulative Spent"}),(0,Y.jsxs)("div",{children:[F.uf.format(s.totalSpent,6)," USD"]})]})]})}return null},x=function(e){if(!e.viewBox)return null;var t=e.viewBox,n=t.x,s=t.y;return(0,Y.jsx)("g",{children:(0,Y.jsx)("text",{fontSize:11,x:n,y:s?s-10:0,fill:"#C7F284",children:(0,Y.jsx)(u.cC,{id:"ocovOd"})})})},m=a.useState(0),f=(0,s.Z)(m,2),v=f[0],h=f[1],j=a.useState((0,p.tq)()?6:9),b=(0,s.Z)(j,2),g=b[0],w=b[1];return(0,Y.jsxs)("div",{className:"h-[350px] p-4 pb-8 lg:h-[400px]",children:[(0,Y.jsxs)("div",{className:"mb-3 flex justify-between text-sm font-semibold text-white/75",children:[(0,Y.jsx)(u.cC,{id:"SWbWiK"}),(0,Y.jsxs)("div",{className:"text-xs font-semibold text-white/75",children:[(0,de.Z)(1e3*t[v].unixTime,"dd/MM/yy")," -"," ",(0,de.Z)(1e3*t[g].unixTime,"dd/MM/yy")]})]}),(0,Y.jsx)("div",{className:"relative h-full w-full",children:(0,Y.jsx)("div",{className:"absolute left-0 top-0 h-full w-full",children:(0,Y.jsx)(Ke.h,{children:(0,Y.jsxs)(Ee.c,{data:t,margin:{top:20,right:0,bottom:20,left:0},children:[(0,Y.jsx)(qe.K,{dataKey:"unixTime",tickLine:!1,axisLine:!1,tick:{fontSize:"11px"},tickFormatter:function(e){return new Date(1e3*e).getDate().toString()}}),(0,Y.jsx)(We.B,{domain:["auto","auto"],type:"number",dataKey:"c",axisLine:!1,tickLine:!1,tick:{fontSize:"11px"},tickFormatter:function(e){return Number(e)>10?e.toFixed(2):e.toFixed(i)}}),(0,Y.jsx)(Re.q,{vertical:!1,strokeWidth:.2,strokeOpacity:.5}),(0,Y.jsx)(ze.d,{y:n.toNumber(),stroke:"#C7F284",strokeWidth:2,strokeDasharray:"5 3",ifOverflow:"discard",label:(0,Y.jsx)(x,{})}),(0,Y.jsx)(Ge.u,{content:(0,Y.jsx)(d,{}),cursor:!1,offset:20}),(0,Y.jsx)(Qe.u,{type:"monotone",dataKey:"c",stroke:"#E8F9FF40",fill:"#E8F9FF26",strokeWidth:2}),(0,Y.jsx)(Ye.b,{dataKey:"buyDetails.purchasedPrice",shape:(0,Y.jsx)(c,{})}),(0,Y.jsx)(Je.B,{onChange:function(e){var t=e.startIndex,n=e.endIndex;t&&h(t),n&&w(n)},travellerWidth:2,startIndex:v,endIndex:g,height:20,fill:"#131B24",dataKey:"unixTime",children:(0,Y.jsx)(Xe.T,{children:(0,Y.jsx)(Qe.u,{type:"monotone",dataKey:"c",stroke:"#E8F9FF40",fill:"#E8F9FF26",strokeWidth:2})})})]})})})})]})},et=n(14051),tt=function(e){var t=e.title,n=e.description,s=e.descriptionColor;return(0,Y.jsxs)("div",{className:"flex flex-col rounded-lg border border-v2-lily/10 bg-v3 p-3",children:[(0,Y.jsx)("div",{className:"text-xs text-white/40",children:(0,Y.jsx)(u.cC,{id:"pDgeaz",values:{title:t}})}),(0,Y.jsx)("div",{className:(0,B.cn)("text-sm font-semibold text-white/75",s),children:(0,Y.jsx)(u.cC,{id:"DZsWoY",values:{description:n}})})]})},nt=function(e){var t,n=e.toTokenAddress,s=e.incrementAmount,i=(0,r.Bn)().getTokenInfo,l=He({toTokenAddress:n,incrementAmount:s}),o=l.data,c=l.isLoading,d=a.useMemo((function(){return i(n)||(0,he.Tr)({address:n})}),[i,n]),m=d.decimals,v=a.useMemo((function(){return!(null===o||void 0===o||!o.pnl||!o.pnl.gt(0))}),[null===o||void 0===o?void 0:o.pnl]),h=a.useMemo((function(){return 0===s||!o||o.priceData.length<10}),[o,s]),p=(0,et.Z)({baseTokenInfo:d,quoteTokenInfo:f.Gm}),j=p.data,b=p.isLoading;return(0,Y.jsxs)("div",{className:"relative flex h-full w-full flex-col rounded-2xl bg-uiv2 shadow-xl",children:[(0,Y.jsxs)("div",{className:"flex w-full justify-between border-b border-v2-lily/5 px-4 py-2",children:[(0,Y.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,Y.jsx)(ae.Z,{info:d,width:28,height:28}),(0,Y.jsxs)("div",{className:"text-md flex gap-2 font-semibold",children:[(0,Y.jsx)("span",{children:d.symbol}),(0,Y.jsx)("span",{children:x.ag._({id:"kzwPbK"})})]})]}),b?(0,Y.jsx)(se.O,{className:"h-7 w-20"}):(0,Y.jsxs)("div",{className:"flex text-xl font-semibold text-v2-lily",children:["$",(0,Y.jsx)(ye.ZP,{value:null!==(t=null===j||void 0===j?void 0:j.currentPrice.toNumber())&&void 0!==t?t:0,maxSuffix:5})]})]}),(0,Y.jsxs)("div",{className:"flex w-full",children:[c&&(0,Y.jsx)("div",{className:"absolute inset-y-0 left-0 z-20 w-full bg-black/10 backdrop-blur-sm"}),h?(0,Y.jsx)("div",{className:"flex w-full flex-1 items-center justify-center text-xs text-v2-lily/75",children:(0,Y.jsx)(u.cC,{id:"tMFDem"})}):(0,Y.jsxs)("div",{className:"w-full",children:[(0,Y.jsx)("div",{className:"text-xxl p-4 font-bold text-v2-primary",children:(0,Y.jsx)(u.cC,{id:"ydbX/t"})}),o&&o.priceData.length>=10?(0,Y.jsx)("div",{className:"border-b border-v2-lily/5 px-4 py-2",children:(0,Y.jsxs)("div",{className:"text-sm text-white/75",children:[(0,Y.jsx)(u.cC,{id:"s8xAfa",values:{0:d.symbol,1:(0,de.Z)(1e3*o.priceData[0].unixTime,"dd/MM/yy"),2:o.totalSpent.toFixed(2),3:o.pnl.toFixed(2),4:o.pnlPercentage.toFixed(2),5:o.currentInvestmentValue.toFixed(2),incrementAmount:s}}),(0,Y.jsx)("p",{className:"pt-2 text-xs italic",children:"*historic performance does not indicate future performance"})]})}):null,o&&o.priceData.length>=10?(0,Y.jsxs)("div",{className:"flex flex-col",children:[(0,Y.jsxs)("div",{className:"grid grid-cols-2 gap-3 border-b border-v2-lily/5 p-4 md:grid-cols-3",children:[(0,Y.jsx)(tt,{title:"Average Price",description:x.ag._({id:"fafKe2",values:{0:(0,ye.M)({value:o.averagePrice.toNumber()})}})}),(0,Y.jsx)(tt,{title:"Total Bought",description:"".concat(F.uf.format(o.totalToken,m)," ").concat(d.symbol)}),(0,Y.jsx)(tt,{title:"Number of Buys",description:"".concat(o.numberOfBuys)}),(0,Y.jsx)(tt,{title:"Total Spent",description:"".concat(F.uf.format(o.totalSpent,2)," USD")}),(0,Y.jsx)(tt,{title:"Current Investment Value",description:x.ag._({id:"fafKe2",values:{0:F.uf.format(o.currentInvestmentValue,2)}})}),(0,Y.jsx)(tt,{title:"PnL",description:x.ag._({id:"rb43H3",values:{0:F.uf.format(o.pnl,2),1:F.uf.format(o.pnlPercentage,2)}}),descriptionColor:v?"text-perps-green":"text-perps-red"})]}),(0,Y.jsx)($e,{priceData:o.priceData,averagePrice:o.averagePrice,toTokenInfo:d})]}):(0,Y.jsxs)("div",{className:"flex w-full flex-col space-y-2",children:[(0,Y.jsx)(se.O,{className:"h-10 w-full"}),(0,Y.jsx)(se.O,{className:"h-20 w-full"}),(0,Y.jsx)(se.O,{className:"h-20 w-full"})]})]})]})]})},st="pairs-select-to-pair-modal-va",rt={autoWithdraw:!0,fromTokenAddress:Z.cq.toBase58(),toTokenAddress:Z.W4.toBase58(),intervalNumber:{formattedValue:"1",value:"1",floatValue:1},period:"day",fromValue:{formattedValue:"10",value:"10",floatValue:10},increaseBy:{formattedValue:"2",value:"2",floatValue:2},startAt:null},it=function(e){var t=e.outToken,n=e.inToken,i=(0,r.Os)(),c=(0,T.R3)(),P=(0,w.NL)(),X=(0,I.T)(),$=(0,N.KO)(h.yz),ee=(0,s.Z)($,1)[0],ne=(0,N.KO)(D.isLoading),se=(0,s.Z)(ne,1)[0],re=(0,N.KO)(D.refetchId),ie=(0,s.Z)(re,2),ae=(ie[0],ie[1]),le=(0,a.useState)((0,p.wm)()),oe=le[0],ce=le[1],de=(0,O.gs)().priorityLevel,ue=(0,r.Rc)(),xe=a.useMemo((function(){return new v._V(ue,"mainnet-beta","https://va.jup.ag")}),[ue]),me=a.useState("Active VAs"),fe=(0,s.Z)(me,2),ve=fe[0],he=fe[1],pe=(0,C.cI)({defaultValues:rt,mode:"onChange"}),je=pe.control,be=pe.setValue,ge=pe.handleSubmit,we=pe.formState,ye=we.errors,Ne=we.isValid,ke=we.isSubmitting,Ce=pe.trigger,Ve=(0,V.hv)().appDomain,Oe=(0,r.y6)().tokenPriceMap,Te=(0,r.Bn)().tokens,Me=(0,C.qo)({control:je,name:"fromTokenAddress"}),Ae=(0,C.qo)({control:je,name:"toTokenAddress"}),Pe=(0,C.qo)({control:je,name:"period"}),De=(0,C.qo)({control:je,name:"intervalNumber"}),Fe=(0,C.qo)({control:je,name:"increaseBy"}),_e=(0,C.qo)({control:je,name:"autoWithdraw"}),Le=(0,C.qo)({control:je,name:"fromValue"}),He=(0,C.qo)({control:je,name:"startAt"});a.useEffect((function(){Ce()}),[Ce,Fe,Le,He]),(0,a.useEffect)((function(){n&&be("fromTokenAddress",n.address),t&&be("toTokenAddress",t.address)}),[n,t]);var Ue=(0,z.Q)({fromTokenInfo:n,toTokenInfo:t,quoteResponse:void 0,isLaunchPage:!1}),Ke=(0,M.D)([n,t]).tokensWithTransferFee,Ee=(0,_.useIsAccountFrozen)(n),qe=(0,_.useIsAccountFrozen)(t),We=(0,r.FB)(Me).balance,Re=a.useMemo((function(){var e;return null===(e=Oe[Me])||void 0===e?void 0:e.usd}),[Oe,Me]),ze=a.useMemo((function(){return Te.map((function(e){return e.address}))}),[Te]),Ge=a.useMemo((function(){return U.tc.find((function(e){return e.id===Pe}))}),[Pe]),Qe=a.useMemo((function(){return U.tc.map((function(e){return e.id})).filter((function(e){return!["second"].includes(e)}))}),[]),Ye=a.useMemo((function(){return!(null===n||void 0===n?void 0:n.decimals)||new y.Z((null===Le||void 0===Le?void 0:Le.floatValue)||0).lessThanOrEqualTo(We)}),[We,null===n||void 0===n?void 0:n.decimals,null===Le||void 0===Le?void 0:Le.floatValue]),Je=a.useCallback((function(e){e&&be("fromTokenAddress",e)}),[be]),Xe=a.useCallback((function(e){e&&be("toTokenAddress",e)}),[be]),$e=a.useCallback((function(e){be("fromValue",{floatValue:e.toNumber(),formattedValue:e.toString(),value:e.toString()})}),[be]),et=a.useCallback((function(){X(t,n)}),[n,t,X]),tt=a.useCallback(function(){var e=(0,o.Z)(d().mark((function e(s){var r,a,o,x,m,f,w,N,k,C,S,Z;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=s.fromValue,a=s.increaseBy,o=s.autoWithdraw,x=s.startAt,!(r.value&&a.value&&Ge&&De&&n&&t&&i.publicKey)){e.next=17;break}return f=new y.Z(r.value).mul(Math.pow(10,n.decimals)),w=new y.Z(a.value).mul(Math.pow(10,q.Gm.decimals)),e.next=7,xe.open({autoWithdraw:o,inputTokenProgram:(0,p.kL)(n)?b.nA:j.H_,outputTokenProgram:(0,p.kL)(t)?b.nA:j.H_,inputMint:new g.PublicKey(Me),outputMint:new g.PublicKey(Ae),depositAmount:BigInt(f.toFixed(0)),incrementUSDCValue:BigInt(w.toFixed(0)),user:i.publicKey,payer:i.publicKey,startAtUnix:x?BigInt(x/1e3):void 0,orderInterval:BigInt((null===Ge||void 0===Ge?void 0:Ge.secondsInPeriod)*(Number(De.value)||0))});case 7:return N=e.sent,k=N.ixs,e.next=11,ue.getLatestBlockhash("confirmed");case 11:return C=e.sent,S=C.blockhash,Z=C.lastValidBlockHeight,e.next=16,c((m=new g.Transaction({feePayer:i.publicKey,blockhash:S,lastValidBlockHeight:Z})).add.apply(m,(0,l.Z)(k)),{blockhash:S,lastValidBlockHeight:Z,idl:v.xO,idlProgramId:new g.PublicKey(v.MG["mainnet-beta"])},{successMessage:(0,Y.jsx)(u.cC,{id:"tylKkb",values:{0:r.value,1:n.symbol,2:a.floatValue}}),submittingMessage:(0,Y.jsx)(u.cC,{id:"S+De3s"}),errorMessage:(0,Y.jsx)(u.cC,{id:"4zZcxO"}),toastId:oe,referenceFee:"MEDIUM"===de?ee.va.m:"HIGH"===de?ee.va.h:"VERY_HIGH"===de?ee.va.vh:void 0,minimumFee:h.uo,requestComputeBudgetLimit:3e5});case 16:P.invalidateQueries({queryKey:["va"]});case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.error(e.t0);case 22:return e.prev=22,ce((0,p.wm)()),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[0,19,22,25]])})));return function(t){return e.apply(this,arguments)}}(),[Ge,De,n,t,i.publicKey,xe,Me,Ae,ue,c,P,de,ee.va.m,ee.va.h,ee.va.vh,oe]),it=a.useMemo((function(){return null!==De&&void 0!==De&&De.floatValue?"minute"===Pe&&De.floatValue<10&&x.ag._({id:"rG1XPn"}):"Please enter an interval above 0"}),[Pe,null===De||void 0===De?void 0:De.floatValue]),at=a.useMemo((function(){return!Ne||(null===Ke||void 0===Ke?void 0:Ke.length)>0||!Ye||Ee||qe||qe||Boolean(it)}),[Ne,Ke,Ye,Ee,qe,it]),lt=a.useCallback((function(){var e=new y.Z(We);Me===Z.W4.toBase58()&&(e=e.minus(f.WO)),be("fromValue",{floatValue:e.toNumber(),formattedValue:e.toString(),value:e.toString()})}),[We,Me,be]);return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)("div",{className:"flex h-full w-full flex-col items-center justify-between text-lg text-v2-lily lg:text-2xl",children:(0,Y.jsx)("div",{className:"flex w-full justify-center",children:(0,Y.jsxs)("div",{className:"flex w-full flex-col items-center justify-center gap-5 lg:gap-0",children:[(0,Y.jsxs)("form",{className:"flex h-auto w-full flex-col space-y-2",onSubmit:ge(tt),children:[(0,Y.jsxs)("div",{className:"flex flex-col",children:[(0,Y.jsx)("div",{children:(0,Y.jsx)(C.Qr,{name:"fromValue",control:je,rules:{validate:function(e){return!!ye.increaseBy||(Re&&Fe.floatValue&&(!e.floatValue||e.floatValue*Re<2*Fe.floatValue)?x.ag._({id:"g95zBH",values:{0:2*Fe.floatValue}}):void 0)},required:"Required"},render:function(e){var t=e.field,s=t.onChange,r=t.value,i=t.onBlur,a=e.fieldState.error;return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)("div",{className:(0,B.cn)("flex min-h-[124px] flex-col space-y-3 rounded-xl border border-transparent bg-uiv2 p-4","focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:[(0,Y.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Y.jsx)("span",{className:"text-sm font-medium text-v2-lily",children:(0,Y.jsx)(u.cC,{id:"2Xn1tM"})}),n&&(0,Y.jsxs)("div",{className:"flex space-x-2",children:[(0,Y.jsx)("div",{className:"flex cursor-pointer items-center space-x-1 whitespace-nowrap text-xs font-normal text-v2-lily/50 hover:text-v2-lily",onClick:lt,children:(0,Y.jsx)(H.Z,{tokenInfo:n,className:"hover:text-v2-lily"})}),(0,Y.jsx)(m.oi,{mint:n.address,onBalanceChange:$e})]})]}),(0,Y.jsxs)("div",{className:"flex flex-1 items-center justify-between space-x-2",children:[(0,Y.jsx)(L.Z,{onChange:Je,fromTokenAddress:Me,toTokenAddress:Ae,modalId:st,name:"fromTokenAddress",mintsList:ze,type:"tokenAndInput"}),(0,Y.jsx)(K.Z,{onBlur:i,onChange:s,tokenAddress:Me,value:r,name:"fromValue",tokenAmountClassname:"font-semibold text-v2-lily",usdValueClassname:"!text-xs font-normal text-v2-lily/50"})]})]}),(null===a||void 0===a?void 0:a.message)&&(0,Y.jsx)(m.Bc,{message:a.message})]})}})}),(0,Y.jsx)(_.default,{tokenInfo:n,className:"mt-2"}),(0,Y.jsxs)("div",{className:"relative my-1 flex justify-center",children:[(0,Y.jsx)("hr",{className:"absolute top-[calc(50%-1px)] -z-0 w-full border-uiv2/50"}),(0,Y.jsx)("div",{className:"z-10 inline-block",children:(0,Y.jsx)("button",{type:"button",className:(0,B.cn)("group/flip flex h-8 w-8 cursor-pointer flex-col justify-center rounded-full border-[3px] border-uiv2 bg-v2-background-page text-v2-lily/50","hover:border-v2-primary hover:shadow-swap-input-dark"),onClick:et,children:(0,Y.jsx)("span",{className:"flex w-full justify-center fill-current text-v2-lily/50 transition-none group-hover/flip:text-v2-primary",children:(0,Y.jsx)(Q.Z,{})})})})]}),(0,Y.jsxs)("div",{className:(0,B.cn)("flex min-h-[124px] w-full flex-col justify-between rounded-xl border border-transparent bg-uiv2 pt-4","group hover:border-v2-primary/50 hover:shadow-swap-input-dark"),children:[(0,Y.jsxs)("div",{className:"mx-4 mb-2 flex items-center justify-between",children:[(0,Y.jsx)("span",{className:"text-sm font-medium text-v2-lily",children:(0,Y.jsx)(u.cC,{id:"Q7e7JF"})}),t&&(0,Y.jsx)(H.Z,{tokenInfo:t})]}),(0,Y.jsx)(L.Z,{onChange:Xe,fromTokenAddress:Me,toTokenAddress:Ae,modalId:st,mintsList:ze,name:"toTokenAddress",type:"tokenSelectOnly"})]})]}),(0,Y.jsx)(_.default,{tokenInfo:t,className:"mt-2"}),(0,Y.jsx)(C.Qr,{rules:{validate:function(e){if(!e.floatValue||e.floatValue<2)return x.ag._({id:"VJYfkd"})}},control:je,name:"increaseBy",render:function(e){var t=e.field,n=t.onChange,s=t.value,r=e.fieldState.error;return(0,Y.jsxs)("div",{className:"flex flex-col",children:[(0,Y.jsxs)("div",{className:(0,B.cn)("flex flex-col space-y-3 rounded-xl border border-transparent bg-uiv2 p-4","group focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:[(0,Y.jsx)("span",{className:"text-xs font-medium text-v2-lily/50",children:(0,Y.jsx)(u.cC,{id:"cBuE1X"})}),(0,Y.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Y.jsx)("span",{className:"rounded-lg bg-v2-background-page px-3 py-2 text-center text-sm font-semibold text-v2-lily",children:"USD"}),(0,Y.jsx)(G.Z,{name:"increaseBy",className:"!bg-transparent !text-right !text-xl !font-semibold !text-v2-lily !outline-none",onChange:n,value:null===s||void 0===s?void 0:s.value,decimals:2})]})]}),(null===r||void 0===r?void 0:r.message)&&(0,Y.jsx)(m.Bc,{message:r.message})]})}}),(0,Y.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,Y.jsx)("div",{className:"flex basis-1/3 flex-col",children:(0,Y.jsxs)("div",{className:(0,B.cn)("flex flex-col space-y-2","rounded-xl border border-transparent bg-uiv2 p-4","group focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:[(0,Y.jsx)("span",{className:"text-xs font-medium text-v2-lily/50",children:(0,Y.jsx)(u.cC,{id:"CRsuq4"})}),(0,Y.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,Y.jsx)(C.Qr,{control:je,name:"intervalNumber",render:function(e){var t=e.field,n=t.onChange,s=t.value;return(0,Y.jsx)(S.Z,{value:null===s||void 0===s?void 0:s.floatValue,onValueChange:n,thousandSeparator:","===F.A5?".":",",decimalSeparator:","===F.A5?",":".",decimalScale:0,allowNegative:!1,allowLeadingZeros:!1,className:"!w-full !bg-transparent !text-sm !font-semibold !text-v2-lily !outline-none"})}}),(0,Y.jsx)("div",{className:"flex items-center justify-end",children:(0,Y.jsx)(C.Qr,{control:je,name:"period",render:function(e){var t=e.field,n=t.onChange,s=t.value;return(0,Y.jsxs)(W.Z,{onChange:n,className:"!bg-transparent !p-0 !text-sm !font-semibold !text-v2-lily",contentClassName:"!min-w-[124px]",data:Qe,value:s,rowRenderer:function(e){return(0,Y.jsx)("div",{className:"text-sm",children:e})},children:[s,(0,Y.jsx)("div",{className:"ml-2 fill-current text-v2-lily/25 hover:text-v2-lily",children:(0,Y.jsx)(A.Z,{})})]})}})})]})]})}),(0,Y.jsxs)("div",{className:(0,B.cn)("flex basis-2/3 flex-col space-y-2","rounded-xl border border-transparent bg-uiv2 p-4","group focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:[(0,Y.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Y.jsx)("span",{className:"text-xs font-medium text-v2-lily/50",children:(0,Y.jsx)(u.cC,{id:"tkzlHe"})}),(0,Y.jsx)("button",{type:"button",className:"cursor-pointer rounded text-xxs font-semibold text-v2-lily/30 underline hover:text-v2-lily",onClick:function(){return be("startAt",He?null:Date.now())},children:He?(0,Y.jsx)(u.cC,{id:"OfhWJH"}):(0,Y.jsx)(u.cC,{id:"D3iCkb"})})]}),He?(0,Y.jsx)(C.Qr,{rules:{validate:function(e){if(e&&e<=Date.now())return x.ag._({id:"Wbr6da"})}},control:je,name:"startAt",render:function(e){var t=e.field.onChange;return(0,Y.jsx)("input",{type:"datetime-local",onChange:function(e){return t(new Date(e.target.value).getTime())},className:"w-full !bg-transparent !p-0 !text-sm !font-semibold !text-v2-lily !outline-none"})}}):(0,Y.jsx)("span",{className:"text-sm font-semibold text-v2-lily",children:"Start Now"})]})]}),it&&(0,Y.jsx)(m.Bc,{message:it}),(0,Y.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Y.jsxs)("label",{htmlFor:"autoWithdraw",className:"text-xs font-medium text-v2-lily/50",children:[(0,Y.jsx)(u.cC,{id:"Xl0vxS"})," $",null===t||void 0===t?void 0:t.symbol," ",(0,Y.jsx)(u.cC,{id:"2J/QWD"})]}),(0,Y.jsx)(J,{buttons:[{value:x.ag._({id:"R9Khdg"}),onChange:function(){return be("autoWithdraw",!0)},isSelected:_e},{value:x.ag._({id:"yHCNzt"}),onChange:function(){return be("autoWithdraw",!1)},isSelected:!_e}]})]}),(0,Y.jsx)(R.Z,{loading:!1,listOfSuggestions:Ue}),i.connected?(0,Y.jsx)(Ie,{disabled:at,isAccountFrozen:Ee||qe,hasEnoughBalance:Ye,isToken2022:(null===Ke||void 0===Ke?void 0:Ke.length)>0,loading:ke,toastId:oe}):(0,Y.jsx)(E.Z,{}),(0,Y.jsx)(Be,{fromValue:Le,fromTokenInfo:n,toTokenInfo:t,increaseBy:Fe,intervalNumber:De,period:Pe,startAt:He})]}),(0,V.mD)(Ve)&&Ve.container.leftContainerGraph&&Ve.container.leftContainerGraph.current&&(0,k.createPortal)((0,Y.jsx)(nt,{toTokenAddress:Ae,incrementAmount:Fe.floatValue||0}),Ve.container.leftContainerGraph.current)]})})}),i.connected?(0,Y.jsx)("div",{className:"flex w-full items-start justify-start space-x-2 overflow-y-auto",children:(0,V.mD)(Ve)&&Ve.container.leftContainerHistories&&Ve.container.leftContainerHistories.current&&(0,k.createPortal)((0,Y.jsxs)(te,{isLoading:se,tabs:["Active VAs","Past VAs"],activeTab:ve,setActiveTab:he,refetch:function(){ae((function(e){return e+1}))},children:["Active VAs"===ve?(0,Y.jsx)(Se,{vaClient:xe}):null,"Past VAs"===ve?(0,Y.jsx)(Ze,{vaClient:xe}):null]}),Ve.container.leftContainerHistories.current)}):null,i.connected?(0,Y.jsx)("div",{className:"flex w-full items-start justify-start space-x-2 overflow-y-auto",children:(0,V.mD)(Ve)&&Ve.container.bottomPageHistories&&Ve.container.bottomPageHistories.current&&(0,k.createPortal)((0,Y.jsxs)(te,{isLoading:se,tabs:["Active VAs","Past VAs"],activeTab:ve,setActiveTab:he,refetch:function(){ae((function(e){return e+1}))},children:["Active VAs"===ve?(0,Y.jsx)(Se,{vaClient:xe}):null,"Past VAs"===ve?(0,Y.jsx)(Ze,{vaClient:xe}):null]}),Ve.container.bottomPageHistories.current)}):null]})},at=n(22466),lt=!0,ot=function(){var e=(0,at.V)(),t=(0,s.Z)(e,2),n=t[0],l=t[1],o=(0,r.gZ)().fetchTokenAccounts;return(0,a.useEffect)((function(){n&&l&&o([n.address,l.address])}),[n,l,o]),n&&l?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(i.PB,{title:"VA"}),(0,Y.jsx)(it,{inToken:n,outToken:l})]}):null}},51550:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/va/[inOut]",function(){return n(98959)}])}},function(e){e.O(0,[13215,94669,23649,69711,7842,59536,67161,49774,92888,40179],(function(){return t=51550,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=[inOut]-d7692255255d6995.js.map