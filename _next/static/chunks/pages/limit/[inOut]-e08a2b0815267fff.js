(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[35285],{16563:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(23877),i=n(65055),s=n(33219);function a(e){(0,s.Z)(1,arguments);var t=(0,i.Z)(e);return(0,r.Z)(1e3*t)}},84914:function(e,t,n){"use strict";var r=n(93981),i=n(42754),s=n(81423),a=n(91511),o=n(11711),l=n(29541);n(11805);t.ZP=function(e){var t=e.children,n=(0,o.NL)(),c=(0,r.useState)((function(){return a.d.createClient({transformer:i.ZP,links:[(0,s.N8)({url:"".concat("","/api/trpc")})]})}))[0];return(0,l.jsx)(a.d.Provider,{client:c,queryClient:n,children:t})}},34522:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return He},default:function(){return _e}});var r=n(68586),i=n(63956),s=n(70107),a=n(97620),o=n(27195),l=n(8857),c=n.n(l),u=n(8473),d=n(4707),f=n(26174),m=n(23112),x=n(7744),h=n(65558),p=n.n(h),v=n(91551),b=n.n(v),j=n(13838),g=n(93981),w=n(13215),y=n(72215),k=n(27177),P=n(13170),N=n(63277),C=n(42082),Z=n(22466),O=n(29541),I={decimals:6,address:"",chainId:101,name:"",symbol:""},T=(0,g.createContext)(null),M=function(){var e=(0,g.useContext)(T);if(!e)throw new Error("useLimitOrderUi must be used within LimitOrderProvider");return e},V=function(e){var t,n,r=e.fromPairTokenInfo,i=e.toPairTokenInfo,s=e.children,o=(0,C.T)(),l=(0,Z.V)(),c=(0,a.Z)(l,2),u=c[0],d=c[1],f=(0,y.gZ)().fetchTokenAccounts;(0,g.useEffect)((function(){u&&d&&f([u.address,d.address])}),[u,d,f]);var m=(0,g.useCallback)((function(e,t){o(e,t)}),[o]);return(0,O.jsx)(T.Provider,{value:{onPairChange:m,fromPairTokenInfo:null!==(t=null!==r&&void 0!==r?r:u)&&void 0!==t?t:I,toPairTokenInfo:null!==(n=null!==i&&void 0!==i?i:d)&&void 0!==n?n:I},children:s})},S=n(66956),F=n(25546),B=n(40993),A=n(25224),D=n(75206),H=n(45009),_=n(3011),K=n(72997),L=n(72282),E=n(90342),q=n(33130),R=n(5564),Q=n(11003),W=n(85394),z=n(59394),U=n(78013),G=n(11823),J=n(56720),Y=n(64508),X=n.n(Y),$=n(78232),ee=n(41118),te=n(77798),ne=n(23632),re=n(68718),ie=n(55948),se=n(16344),ae=n(24201),oe=n(89881),le=n(54566),ce=n(70006),ue=n(71130),de=n(37124),fe=n(33118),me=n(30610),xe=n(56100),he=n(62146),pe=n(10563),ve=n(96404),be=n(69825),je=n(95523),ge=n(12939),we=function(e){return Object.entries(e).reduce((function(e,t){var n=(0,a.Z)(t,2),r=n[0],i=n[1];return"hour"===r?e+=60*i*60:"minute"===r&&(e+=60*i),e}),0)},ye=function(e){var t=e.onSet,n=e.value,r="number"===typeof n?(0,F.K3)(Number(n)):{day:0,hour:0,minute:0},i=r.day,s=r.hour,a=r.minute,o=(0,w.cI)({defaultValues:{hour:(24*i+s).toString(),minute:a.toString()}}),l=o.control,c=o.handleSubmit,d=(0,o.watch)(),f=(0,g.useMemo)((function(){return!d.hour&&!d.minute||0===Number(d.hour)&&0===Number(d.minute)||we(d)>31536e4}),[d.hour,d.minute]),m=(0,g.useCallback)((function(e){var n=we(e);t(String(n))}),[t]),x=(0,g.useRef)(),h=(0,g.useRef)(),p=(0,g.useCallback)((function(){var e;return null===x||void 0===x||null===(e=x.current)||void 0===e?void 0:e.focus()}),[]),v=(0,g.useCallback)((function(){var e;return null===h||void 0===h||null===(e=h.current)||void 0===e?void 0:e.focus()}),[]);return(0,O.jsx)("div",{className:"flex w-full justify-center",children:(0,O.jsxs)("form",{className:"flex w-[320px] flex-col space-y-3 rounded-xl bg-tuna p-3 shadow-lg",onSubmit:c(m),children:[(0,O.jsx)("div",{className:"text-base font-semibold leading-8",children:(0,O.jsx)(u.cC,{id:"dcjUFe"})}),(0,O.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,O.jsxs)("div",{onClick:p,className:"flex w-full items-center justify-between rounded-xl bg-jupiter-input-dark p-4",children:[(0,O.jsx)(w.Qr,{control:l,name:"hour",render:function(e){var t=e.field,n=t.onChange,r=t.value,i=t.name;return(0,O.jsx)(be.Z,{name:i,className:"!text-left !text-sm placeholder:text-white/20",placeholder:"0",decimals:0,onChange:function(e){return n(e.value)},value:"0"===r?"":r,ref:x})}}),(0,O.jsx)("div",{className:"text-sm text-white/20",children:(0,O.jsx)(u.cC,{id:"yY8wAv"})})]}),(0,O.jsxs)("div",{onClick:v,className:"flex w-full items-center justify-between rounded-xl bg-jupiter-input-dark p-4",children:[(0,O.jsx)(w.Qr,{control:l,name:"minute",render:function(e){var t=e.field,n=t.onChange,r=t.value,i=t.name;return(0,O.jsx)(be.Z,{name:i,className:"!text-left !text-sm placeholder:text-white/20",placeholder:"0",decimals:0,onChange:function(e){return n(e.value)},value:"0"===r?"":r,ref:h})}}),(0,O.jsx)("div",{className:"text-sm text-white/20",children:(0,O.jsx)(u.cC,{id:"agRWc1"})})]})]}),(0,O.jsx)("button",{type:"submit",disabled:f,className:"mt-2 w-full items-center rounded-lg bg-jupiter-navy bg-jupiter-gradient p-px font-semibold text-white disabled:cursor-not-allowed disabled:opacity-50",children:(0,O.jsx)("div",{className:"flex items-center justify-center rounded-lg bg-black px-8 py-4",children:(0,O.jsx)("span",{className:"text-center",children:(0,O.jsx)(ge.Z,{animate:!1,children:(0,O.jsx)(u.cC,{id:"dxTa3X"})})})})})]})})},ke=n(46267),Pe=n(59243),Ne=function(e){var t=e.fromPairTokenInfo,n=e.toPairTokenInfo,r=e.baseTokenInfo,i=e.quoteTokenInfo,s=e.baseTokenPrice,a=e.quoteTokenPrice,l=e.baseAndQuoteTokenPriceFetched,f=e.rateDecimals,m=e.control,x=e.isDisabled,h=e.onSubmit,p=e.setValue,v=e.watchAllFields,b=e.formState,k=e.isLoadingDasQuery,N=e.tokenHaveTransferFee,C=e.customDateLabel,Z=e.setCustomDate,I=(0,ce.JT)(),T=I.openContextualModal,V=I.ModalContextConsumer,S=I.closeModal,B=I.openModal,D=(0,y.Os)().wallet,H=M().onPairChange,_=(0,g.createRef)(),K=(0,y.Bn)(),L=K.tokenMap,E=K.newTokenListMap,q=(0,g.useState)(!1),R=q[0],Q=q[1],z=(0,g.useState)(!1),U=z[0],Y=z[1],ge=(0,g.useMemo)((function(){if(!ee.d.find((function(e){return e===(null===t||void 0===t?void 0:t.address)||e===(null===n||void 0===n?void 0:n.address)})))return null;var e=v.fromPair===(null===r||void 0===r?void 0:r.address);return{isFromBase:Boolean(e)}}),[null===r||void 0===r?void 0:r.address,null===t||void 0===t?void 0:t.address,null===n||void 0===n?void 0:n.address,v.fromPair]),we=g.useCallback((function(e){var r=e,i=n;n.address===e.address&&(r=n,i=t),Y(!1),i&&H(r,i)}),[H,t,n]),Ne=g.useCallback((function(e){var r=t,i=e;t.address===e.address&&(r=n,i=t),Y(!1),r&&H(r,i)}),[H,t,n]),Ce=g.useCallback((function(){H(n,t),p("fromPairValue","1"),Y(!1)}),[n,t,H,p]),Ze=(0,g.useMemo)((function(){return(0,A.Hd)(v.targetPrice)?Number(v.targetPrice):0}),[v.targetPrice]),Oe=g.useCallback((function(e){(0,A.Hd)(e)&&p("toPairValue",e)}),[p]),Ie=(0,te.E)(),Te=(0,ne.s)({quoteTokenInfo:i,baseTokenInfo:r,quoteTokenPrice:a,baseTokenPrice:s,isBaseQuoteMode:ge,rateDecimals:f,isSubmitting:b.isSubmitting}),Me=Te.swapMarketPrice,Ve=Te.lastMarketPrice,Se=Te.isFetching,Fe=Boolean(s&&a&&Ve),Be=(0,g.useCallback)((function(e){Me&&Fe&&(p("targetPrice",Me.toFixed()),Oe(null!==ge&&void 0!==ge&&ge.isFromBase?new j.Z(Me.toFixed()).mul(e||0).toDP(f).toFixed():new j.Z(e||0).div(Me).toDP(f).toFixed()))}),[Me,Fe,p,Oe,ge,f]),Ae=(0,g.useMemo)((function(){return E.has(i.address)||E.has(r.address)}),[E,i,r]);(0,g.useEffect)((function(){U||(p("targetPrice",""),p("toPairValue",""),Ae||Be(v.fromPairValue))}),[U,Be,Ae]);var De=(0,g.useMemo)((function(){var e=new j.Z(0);if(!Fe||!v.targetPrice||!Ve)return e;var t=new j.Z(Ze).sub(Ve).div(Ve);return(e=new j.Z(100).mul(t).toDP(2)).isFinite()?e:new j.Z(0)}),[v.targetPrice,Ve,Ze,Fe]),He=(0,g.useMemo)((function(){return De.gt(1e4)?">10000":"".concat(De.toNumber()>0?"+":"").concat(De.toDP(2).toString())}),[De]),_e=(0,g.useMemo)((function(){return null!==ge&&void 0!==ge&&ge.isFromBase?De.toNumber()<0:De.toNumber()>0}),[null===ge||void 0===ge?void 0:ge.isFromBase,De]),Ke=(0,g.useMemo)((function(){return null!==ge&&void 0!==ge&&ge.isFromBase?De.toNumber()>0:De.toNumber()<0}),[null===ge||void 0===ge?void 0:ge.isFromBase,De]),Le=(0,g.useMemo)((function(){return!Se&&(_e||Ke)}),[_e,Ke,Se]),Ee=(0,g.useMemo)((function(){return null!==ge&&void 0!==ge&&ge.isFromBase?De.toNumber()>-5:De.toNumber()<5}),[null===ge||void 0===ge?void 0:ge.isFromBase,De]),qe=(0,y.y6)().tokenPriceMap,Re=(0,g.useMemo)((function(){return!Fe&&!Se&&l}),[l,Fe,Se]),Qe=(0,g.useMemo)((function(){if(Ie){if(Ae)return(0,O.jsx)(u.cC,{id:"ngTKhz"});if(Re)return(0,O.jsx)(u.cC,{id:"0JMusf"});var e=(0,O.jsx)(X(),{shallow:!0,href:"/swap/".concat(t.symbol,"-").concat(n.symbol,"?inAmount=").concat(v.fromPairValue),className:"font-bold underline",target:"_blank",children:(0,O.jsx)(u.cC,{id:"wyRSKi"})}),r=(0,O.jsx)(u.cC,{id:"8NtPYF",values:{0:De.absoluteValue(),1:null!==ge&&void 0!==ge&&ge.isFromBase?"lower":"higher",2:null!==ge&&void 0!==ge&&ge.isFromBase?"selling":"buying",3:null!==ge&&void 0!==ge&&ge.isFromBase?"lower":"higher",swapLink:e}});if(null!==ge&&void 0!==ge&&ge.isFromBase){if(De.toNumber()<=-.5)return r}else if(De.toNumber()>=.5)return r}}),[Ie,Ae,Re,t.symbol,n.symbol,v.fromPairValue,De,null===ge||void 0===ge?void 0:ge.isFromBase]),We=(0,y.FB)(v.fromPair).balance,ze=g.useCallback((function(e){var t;e.preventDefault(),t=v.fromPair===P.W4.toBase58()?new j.Z(We).gt(J.WO)?new j.Z(We).minus(J.WO).toString():"0":String(We),p("fromPairValue",t);var n=null!==ge&&void 0!==ge&&ge.isFromBase?Ze:Ze?1/Ze:0;p("toPairValue",new j.Z(t).mul(n).toFixed())}),[v.fromPair,p,null===ge||void 0===ge?void 0:ge.isFromBase,Ze,We]),Ue=(0,g.useMemo)((function(){if(null===D||void 0===D||!D.adapter.connected)return!1;if((null===t||void 0===t?void 0:t.address)!==P.W4.toBase58())return!1;if(!(0,A.Hd)(v.fromPairValue))return!1;var e=new j.Z(We).minus(J.WO);return new j.Z(v.fromPairValue||0).gt(e)}),[null===t||void 0===t?void 0:t.address,We,null===D||void 0===D?void 0:D.adapter.connected,v.fromPairValue]),Ge=(0,g.useMemo)((function(){return new j.Z(v.fromPairValue||0).lte(We)}),[We,v.fromPairValue]),Je=(0,oe.useIsAccountFrozen)(t),Ye=(0,oe.useIsAccountFrozen)(n),Xe=(0,g.useCallback)((function(){V&&T(Pe.YN,void 0,(0,O.jsx)(V,{children:function(){var e,t;return(0,O.jsx)(ye,{onSet:function(e){p("expiry",e),Z((0,F.K3)(Number(e))),S()},value:null!==(e=null===(t=Pe.yn[v.expiry])||void 0===t?void 0:t.name)&&void 0!==e?e:Number(v.expiry)})}}),{position:"center",containerStyle:{background:"none",boxShadow:"none"}})}),[V,v.expiry,T,p,S,Z]),$e=(0,re.Z)({tokens:[]}),et=(0,g.useCallback)(function(){var e=(0,o.Z)(c().mark((function e(r){var i,s,a,o,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),i=v.fromPairValue,s=v.targetPrice,a=v.toPairValue,o=i?new j.Z(i).mul(s):null,l=new j.Z(i).div(a).toString(),B((0,O.jsx)($.Z,{quotedRate:l,onConfirm:h,inputAmount:i,outputAmount:a,inputPair:t,outputPair:n,usdRate:o}),{onClose:function(){},containerStyle:{borderRadius:"12px"}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,h,B,n,v]),tt=(0,g.useMemo)((function(){var e,n=null===(e=qe[t.address||""])||void 0===e?void 0:e.usd;return new j.Z(v.fromPairValue||0).mul(n||0).mul(1.001).lt(ee.u)}),[v.fromPairValue,t.address,qe]),nt=(0,g.useMemo)((function(){return x||!Ge||Ue||!Ee||Je||Ye||k||(null===N||void 0===N?void 0:N.length)>0||tt}),[Ge,x,Je,Ye,k,Ue,Ee,null===N||void 0===N?void 0:N.length,tt]),rt=(0,pe.Q)({fromTokenInfo:t,toTokenInfo:n,quoteResponse:void 0,isLaunchPage:!1});return(0,O.jsxs)("form",{className:"flex h-auto w-full flex-col justify-center space-y-2",onSubmit:Re?et:h,children:[(0,O.jsxs)("div",{children:[(0,O.jsxs)("div",{className:(0,ae.cn)("group flex min-h-[124px] flex-col space-y-3 rounded-xl border border-transparent bg-uiv2 p-4","focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:[(0,O.jsxs)("div",{className:"flex items-center justify-between",children:[(0,O.jsx)("span",{className:"text-sm font-medium text-v2-lily",children:(0,O.jsx)(u.cC,{id:"HVPy4o"})}),(0,O.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,O.jsx)("div",{className:"fill-current text-white-75",children:(0,O.jsx)(se.Z,{width:12,height:12})}),t.address?(0,O.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,O.jsxs)("div",{className:"flex cursor-pointer items-center space-x-1 whitespace-nowrap text-xs font-normal text-v2-lily/50 hover:text-v2-lily",onClick:ze,children:[(0,O.jsx)(ve.Z,{mintAddress:t.address}),(0,O.jsx)("span",{children:t.symbol})]}),(0,O.jsx)(G.oi,{mint:t.address,onBalanceChange:function(e){p("fromPairValue",e.toString());var t=null!==ge&&void 0!==ge&&ge.isFromBase?Ze:Ze?1/Ze:0;p("toPairValue",new j.Z(e).mul(t).toFixed())}})]}):(0,O.jsx)("span",{children:"0.00"})]})]}),(0,O.jsx)(ke.Z,{testId:"fromPair",pair:t,pairName:"fromPairValue",disabled:!1,control:m,onSubmit:we,mintsList:Array.from(L.keys()),modalId:Pe.r$,watchAllFields:v,onChangeCalculate:function(e){var t=(0,A.Hd)(e)?e:0,r=null!==ge&&void 0!==ge&&ge.isFromBase?Ze:Ze?1/Ze:0;p("fromPairValue",t||""),p("toPairValue",new j.Z(t).mul(r).toDP(n.decimals).toFixed())},className:"flex-1"})]}),tt&&(0,O.jsx)(G.Bc,{message:d.ag._({id:"ch6TPz",values:{MINIMUM_LIMIT_ORDER:ee.u}})}),(0,O.jsx)(oe.default,{tokenInfo:t,className:"mt-2"}),Ue?(0,O.jsx)(ue.Z,{className:"mt-2 !px-2 !text-xs !font-normal !text-v2-lily",message:d.ag._({id:"p6yX1j",values:{MINIMUM_SOL_BALANCE:J.WO}}),iconSize:16}):null,(0,O.jsxs)("div",{className:"relative my-1 flex justify-center",children:[(0,O.jsx)("hr",{className:"absolute top-[calc(50%-1px)] -z-0 w-full border-uiv2/50"}),(0,O.jsx)("div",{className:"z-10 inline-block",children:(0,O.jsx)("button",{type:"button",className:(0,ae.cn)("group/flip flex h-8 w-8 cursor-pointer flex-col justify-center rounded-full border-[3px] border-uiv2 bg-v2-background-page text-v2-lily/50","hover:border-v2-primary hover:shadow-swap-input-dark"),onClick:Ce,children:(0,O.jsx)("span",{className:"flex w-full justify-center fill-current text-v2-lily/50 transition-none group-hover/flip:text-v2-primary",children:(0,O.jsx)(je.Z,{})})})})]}),(0,O.jsx)("div",{className:"border-b border-transparent",children:(0,O.jsxs)("div",{className:(0,ae.cn)("group flex min-h-[124px] flex-col space-y-2 rounded-lg border border-transparent bg-uiv2 p-4","focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:[(0,O.jsxs)("div",{className:"flex items-center justify-between",children:[(0,O.jsx)("span",{className:"text-sm font-medium text-v2-lily",children:(0,O.jsx)(u.cC,{id:"f6aTaB"})}),(0,O.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,O.jsx)("div",{className:"fill-current text-white-75",children:(0,O.jsx)(se.Z,{width:12,height:12})}),n.address?(0,O.jsxs)("div",{className:"flex cursor-pointer items-center whitespace-nowrap text-xs font-normal text-v2-lily/50 hover:text-v2-lily",children:[(0,O.jsx)(ve.Z,{mintAddress:n.address}),(0,O.jsx)("span",{className:"ml-1",children:n.symbol})]}):(0,O.jsx)("span",{children:"0.00"})]})]}),(0,O.jsx)(ke.Z,{testId:"toPair",pair:n,pairName:"toPairValue",control:m,onSubmit:Ne,mintsList:Array.from(L.keys()),modalId:Pe.re,watchAllFields:v,onChangeCalculate:function(e){var t=(0,A.Hd)(e)?e:0,n=null!==ge&&void 0!==ge&&ge.isFromBase?Ze:Ze?1/Ze:0;p("toPairValue",0===t?"":t),p("fromPairValue",0===t?"0":new j.Z(t).div(n).toFixed())},className:"flex-1"})]})}),(0,O.jsx)(oe.default,{tokenInfo:n,className:"mt-2"})]}),(0,O.jsxs)("div",{className:"mb-2 flex-col-reverse space-y-2 sm:flex sm:flex-row sm:space-x-2 sm:space-y-0",children:[(0,O.jsxs)("div",{className:(0,ae.cn)("flex !h-[90px] w-full flex-col justify-center space-y-1 rounded-lg bg-uiv2 p-4 sm:w-[65%]","border border-transparent focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:[(0,O.jsxs)("div",{className:"flex justify-between",children:[(0,O.jsxs)("div",{className:"flex items-center",children:[r?(0,O.jsxs)("div",{className:"flex items-center text-xs font-medium text-v2-lily/50",children:[null!==ge&&void 0!==ge&&ge.isFromBase?(0,O.jsx)(u.cC,{id:"xNB0TS"}):(0,O.jsx)(u.cC,{id:"qiOIiY"})," ",(0,O.jsx)(u.cC,{id:"kBSo/e",values:{0:null===r||void 0===r?void 0:r.symbol}}),Se?(0,O.jsx)(W.Z,{className:"ml-1",width:8,height:8}):null]}):(0,O.jsx)(xe.O,{className:"h-4 w-2"}),Le?(0,O.jsx)("div",{className:(0,ae.cn)("ml-1 flex items-center text-xs font-medium",{"text-jupiter-yellow":_e,"text-v2-primary":Ke}),children:"(".concat(He,"%)")}):null]}),Fe?(0,O.jsx)("button",{type:"button",className:"cursor-pointer rounded text-xxs font-semibold text-v2-lily/30 underline hover:text-v2-lily",onClick:function(){return Be(v.fromPairValue)},children:(0,O.jsx)(u.cC,{id:"+NNtb4"})}):null]}),(0,O.jsx)(w.Qr,{name:"targetPrice",control:m,render:function(e){var t=e.field,n=t.onChange,r=t.value;return(0,O.jsxs)("div",{children:[(0,O.jsxs)("div",{className:"flex items-end",children:[(0,O.jsx)(be.Z,{testId:"targetPrice",decimals:f,onChangeWithoutEffect:function(e){(0,A.Hd)(e)&&Oe(null!==ge&&void 0!==ge&&ge.isFromBase?new j.Z(e).mul(v.fromPairValue||0).toDP(f).toFixed():new j.Z(v.fromPairValue||0).div(e).toDP(f).toFixed()),n(e)},onFocus:function(){return Y(!0)},value:r,disabled:!1,ref:_,className:"flex-1 !text-left !text-sm !font-semibold !text-v2-lily !outline-none"}),i?(0,O.jsx)("div",{className:"flex items-center",children:(0,O.jsx)("span",{className:"text-sm font-semibold text-v2-lily",children:null===i||void 0===i?void 0:i.symbol})}):(0,O.jsx)(xe.O,{className:"h-6 w-11"})]}),i&&(0,O.jsx)("div",{className:"text-xs text-v2-lily/30",children:(0,O.jsx)(le.default,{prefix:"\u2248 ",tokenInfo:i,amount:Number(r),maxDecimals:6})})]})}})]}),(0,O.jsxs)("div",{className:(0,ae.cn)("flex w-full flex-col space-y-1 rounded-lg bg-uiv2 p-4 sm:w-[35%]","border border-transparent focus-within:border-v2-primary/50 focus-within:shadow-swap-input-dark"),children:[(0,O.jsx)("p",{className:"text-xs font-medium text-v2-lily/50",children:(0,O.jsx)(u.cC,{id:"agO/T/"})}),(0,O.jsx)(w.Qr,{name:"expiry",control:m,render:function(e){var t,n,r=e.field,i=r.onChange,s=r.value;return(0,O.jsx)(me.Z,{isOpen:R,onClose:function(){return Q(!1)},id:"settings-button",placement:"bottom-end",matchWidth:!0,buttonContentClassName:"h-full",buttonContent:(0,O.jsxs)("button",{type:"button",onClick:function(){return Q((function(e){return!e}))},className:"flex h-full w-full items-center justify-between space-x-2 whitespace-nowrap rounded-lg text-left",children:[(0,O.jsx)("span",{className:"flex-1 overflow-hidden text-clip text-sm font-semibold leading-normal text-v2-lily",children:null!==(t=null===(n=Pe.yn[s])||void 0===n?void 0:n.name)&&void 0!==t?t:C}),(0,O.jsx)("span",{className:"flex h-3 w-3 items-center fill-current text-v2-lily/25",children:(0,O.jsx)(ie.Z,{})})]}),popoverContent:(0,O.jsxs)("div",{className:"mt-1 overflow-hidden whitespace-nowrap rounded-lg bg-white/10 text-left",children:[(0,O.jsx)("div",{className:"max-h-52 overflow-y-auto",children:Object.keys(Pe.yn).map((function(e){return(0,O.jsx)("button",{type:"button",onClick:function(){i(e),Q(!1)},className:"flex w-full items-center space-x-2 py-2 pl-4 pr-3 first:pt-3 last:pb-3 hover:bg-shark",children:(0,O.jsx)("span",{className:"text-xs font-medium leading-normal",children:Pe.yn[e].name})},e)}))}),(0,O.jsx)("button",{className:"mt-1 w-full cursor-pointer border-t border-t-white-10 py-2 pl-4 pr-3 text-left text-xs font-medium leading-normal hover:bg-shark",onClick:function(e){e.preventDefault(),Q(!1),Xe()},children:"Custom"})]}),contentClassName:"!bg-transparent !shadow-none z-50 !w-full"})}})]})]}),Qe&&(0,O.jsx)("div",{className:"bg-transparent align-bottom transition-all duration-700",children:(0,O.jsx)("div",{className:"rounded-xl border border-yellow-500 bg-yellow-300/25 px-3 py-2 align-middle text-xs font-medium text-yellow-500 transition-all duration-500",children:Qe})}),(0,O.jsx)(he.Z,{loading:!1,listOfSuggestions:rt}),(0,O.jsx)("div",{className:"flex",children:null!==D&&void 0!==D&&D.adapter.publicKey?$e?(0,O.jsx)(re.y,{}):(0,O.jsx)(de.Z,{type:"submit",disabled:nt,children:Ue||!Ge?(0,O.jsx)(u.cC,{id:"UsQ5AM",values:{0:null===t||void 0===t?void 0:t.symbol}}):(null===N||void 0===N?void 0:N.length)>0?(0,O.jsx)(u.cC,{id:"JCplbe"}):Je||Ye?(0,O.jsx)(u.cC,{id:"DtetjN"}):b.isSubmitting?(0,O.jsx)(u.cC,{id:"LMMGPr"}):(0,O.jsx)(u.cC,{id:"5iQRNE"})}):(0,O.jsx)(fe.Z,{})})]})},Ce=n(67768),Ze=n(28940),Oe=n(43723),Ie=function(e){var t,n,r=e.rateDecimals,i=e.fromPairTokenInfo,s=e.toPairTokenInfo,a=e.fromPairValue,o=e.toPairValue,l=e.expiry,c=e.targetPrice,f=e.feeStructure,m=e.customDateLabel,x=(0,Ze.Z)(),h=x.showSummary,p=x.toggleSummary,v=(0,g.useCallback)((function(){return!(!Pe.CO.includes(i.address)||!Pe.CO.includes(s.address))||(!(!Pe.Jx.includes(i.address)||!Pe.Jx.includes(s.address))||!(!Pe.OC.includes(i.address)&&!Pe.OC.includes(s.address)))}),[i.address,s.address]),b=(0,g.useMemo)((function(){return f.data?v()?new j.Z(f.data.stableFeeBps).div(100).toFixed(2)+"%":new j.Z(f.data.normalFeeBps).div(100).toFixed(2)+"%":null}),[f.data,v]),w=(0,g.useMemo)((function(){var e=new j.Z(a||0);return e.eq(0)?"-":Ce.uf.format(e,i.decimals)}),[a,i.decimals]),y=(0,g.useMemo)((function(){var e=new j.Z(o||0);return e.eq(0)?"-":Ce.uf.format(e,s.decimals)}),[o,s.decimals]),k=(0,g.useMemo)((function(){var e=(0,Ce.Hd)(c)?new j.Z(c):new j.Z(0);return e.eq(0)?"-":Ce.uf.format(e,r)}),[c,r]);return(0,O.jsxs)("div",{children:[(0,O.jsx)("div",{className:"mb-4 mt-3 flex items-center justify-center",children:(0,O.jsxs)("button",{type:"button",onClick:p,className:"flex cursor-pointer items-center space-x-2 text-white/25 hover:text-v2-primary",children:[(0,O.jsx)("div",{className:"flex h-4 w-4 items-center fill-current",children:h?(0,O.jsx)(Oe.Z,{}):(0,O.jsx)(ie.Z,{})}),(0,O.jsx)("span",{className:"text-xs font-medium",children:(0,O.jsx)(u.cC,{id:"UTPJI+"})})]})}),h&&(0,O.jsx)("div",{className:"mt-3 w-full rounded-lg border border-v2-lily/10 p-5 text-xs",children:(0,O.jsxs)("div",{className:"space-y-1",children:[(0,O.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,O.jsx)("div",{className:"text-white-50",children:(0,O.jsx)(u.cC,{id:"7T6CdW"})}),(0,O.jsxs)("span",{className:"text-white-50",children:[w," ",i.symbol]})]}),(0,O.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,O.jsx)("div",{className:"text-white-50",children:(0,O.jsx)(u.cC,{id:"Q7e7JF"})}),(0,O.jsxs)("span",{className:"text-white-50",children:[y," ",s.symbol]})]}),(0,O.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,O.jsx)("div",{className:"text-white-50",children:(0,O.jsx)(u.cC,{id:"u4QQh+",values:{0:s.symbol}})}),(0,O.jsxs)("span",{className:"text-white-50",children:[k," ",i.symbol]})]}),(0,O.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,O.jsx)("div",{className:"text-white-50",children:(0,O.jsx)(u.cC,{id:"agO/T/"})}),(0,O.jsx)("span",{className:"text-white-50",children:null!==(t=null===(n=Pe.yn[l])||void 0===n?void 0:n.name)&&void 0!==t?t:m})]}),(0,O.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,O.jsx)("div",{className:"text-white-50",children:(0,O.jsx)(u.cC,{id:"OHP6fC"})}),(0,O.jsx)("span",{className:"font-bold text-v2-primary",children:b})]}),(0,O.jsxs)("div",{className:"bg-black/15 mt-3 rounded-lg border border-white/[.15] bg-white/5 px-4 py-3 text-xs text-white/75",children:[(0,O.jsx)(u.cC,{id:"egVHzO"}),(0,O.jsx)("a",{className:"ml-1 cursor-pointer underline",href:"https://station.jup.ag/guides/limit-order/how-lo-work",target:"_blank",children:d.ag._({id:"zwWKhA"})})]})]})})]})},Te=n(63068),Me=n(71077),Ve=n(84914),Se=n(91511);function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ae=function(){var e=(0,L.hv)().appDomain,t=(0,y.Os)(),n=t.wallet,r=t.signTransaction,i=t.signAllTransactions,l=t.publicKey,h=(0,y.MG)().constants.CLUSTER,v=(0,y.Bn)().connection,C=(0,k.lm)(),Z=C.toast,I=C.close,T=(0,g.useMemo)((function(){return new f.vN(v)}),[v]),V=M(),G=V.fromPairTokenInfo,J=V.toPairTokenInfo,Y=(0,g.useState)("Open Orders"),X=Y[0],$=Y[1],ee=(0,g.useState)(0),te=ee[0],ne=ee[1];(0,g.useEffect)((function(){ne(0)}),[X]);var re=(0,H.a)([(null===l||void 0===l?void 0:l.toString())||""],(0,o.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return",[]);case 2:return e.t0=Promise,e.next=5,T.getOrders([(0,f.Gt)(l)]);case 5:return e.t1=e.sent,e.next=8,m.AU([(0,f.Gt)(l)],v);case 8:return e.t2=e.sent,e.t3=[e.t1,e.t2],e.next=12,e.t0.all.call(e.t0,e.t3);case 12:return t=e.sent,e.abrupt("return",t.flat().filter(Boolean));case 14:case"end":return e.stop()}}),e)}))),{enabled:Boolean(l)&&"Open Orders"===X,refetchInterval:!1}),ie=re.data,se=re.isFetching,ae=re.refetch,oe=(0,g.useMemo)((function(){return null!==ie&&void 0!==ie&&ie.length?Math.ceil(ie.length/P.eN):0}),[ie]),le=(0,g.useMemo)((function(){return ie?ie.sort((function(e,t){return"createdAt"in e.account===!1?1:"createdAt"in t.account===!1?-1:"createdAt"in e.account&&"createdAt"in t.account?t.account.createdAt.sub(e.account.createdAt).toNumber():0})):[]}),[ie]),ce=(0,g.useMemo)((function(){return(null===le||void 0===le?void 0:le.slice(te*P.eN,te*P.eN+10))||[]}),[te,le]),ue=Se.d.orderWithTradeHistoryWithItemsCount.useQuery({wallet:l?null===l||void 0===l?void 0:l.toString():"",pageIndex:te},{enabled:Boolean(l)&&"Order History"===X,refetchInterval:!1,refetchOnWindowFocus:!1,keepPreviousData:!0}),de=ue.data,fe=ue.isFetching,me=ue.refetch,xe=(0,g.useMemo)((function(){return null!==de&&void 0!==de&&de.itemsCount?Math.ceil((null===de||void 0===de?void 0:de.itemsCount)/P.eN):0}),[de]),he=(0,N.Z0)(h),pe=(0,w.cI)({defaultValues:{fromPair:he.initialFrom,toPair:he.initialTo,fromPairValue:"5",targetPrice:"",toPairValue:"",expiry:"Never"}}),ve=pe.control,be=pe.handleSubmit,je=pe.watch,ge=pe.setValue,we=pe.formState,ye=(0,S.b)(G,J),ke=ye.quoteTokenInfo,Ce=ye.baseTokenInfo,Ze=ye.quoteTokenPrice,Oe=ye.baseTokenPrice,Ve=ye.rateDecimals,Fe=ye.priceFetched;(0,g.useEffect)((function(){ge("fromPair",G.address),ge("toPair",J.address),ge("targetPrice",""),ge("toPairValue","")}),[G,J,ge]);var Ae=je(),De=(0,g.useMemo)((function(){var e=Ae.fromPair,t=Ae.toPair,n=Ae.fromPairValue,r=Ae.targetPrice,i=Ae.toPairValue,s=Ae.expiry;return!e||!t||Number(n)<=0||Number(i)<=0||Number(r)<=0||!s||we.isSubmitting}),[Ae,we.isSubmitting]),He=(0,g.useState)([]),_e=He[0],Ke=He[1],Le=(0,q.R3)(),Ee=(0,_.KO)(B.yz),qe=(0,a.Z)(Ee,1)[0],Re=(0,E.gs)().priorityLevel,Qe=(0,R.D)([G,J]),We=Qe.tokensWithTransferFee,ze=Qe.dasQuery,Ue=Qe.isLoadingDasQuery,Ge=(0,g.useCallback)(function(){var e=(0,o.Z)(c().mark((function e(t){var a,o,l,f,h,b,g,w,k,P,N,C,Z,I,T,M,V,S,F,H,_,K;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!De&&n&&n.adapter.publicKey&&r&&i){e.next=2;break}return e.abrupt("return");case 2:return l=new(p())(new j.Z(t.fromPairValue).mul(Math.pow(10,G.decimals)).round().toString()),f=new(p())(new j.Z(t.toPairValue).mul(Math.pow(10,J.decimals)).round().toString()),h=null!==(a=null===(o=Pe.yn[t.expiry])||void 0===o?void 0:o.value)&&void 0!==a?a:Number(t.expiry),b="Never"===t.expiry?null:new(p())((new Date).valueOf()/1e3+h),g=x.PublicKey.default,e.prev=7,N=(0,A.kL)(G)||(null===ze||void 0===ze||null===(w=ze.find((function(e){return(null===e||void 0===e?void 0:e.id)===G.address})))||void 0===w?void 0:w.token_info.token_program)===y.nA.toString()?y.nA:D.H_,C=(0,A.kL)(J)||(null===ze||void 0===ze||null===(k=ze.find((function(e){return(null===e||void 0===e?void 0:e.id)===J.address})))||void 0===k?void 0:k.token_info.token_program)===y.nA.toString()?y.nA:D.H_,e.next=12,m.D9({params:{uniqueId:new(p())(Math.round(1e6*Math.random())),makingAmount:l,takingAmount:f,expiredAt:b,feeBps:null},maker:n.adapter.publicKey,payer:n.adapter.publicKey,inputMint:new x.PublicKey(t.fromPair),outputMint:new x.PublicKey(t.toPair),inputTokenProgram:N,outputTokenProgram:C,connection:v,wrapAndUnwrapSol:!0});case 12:return Z=e.sent,I=Z.ix,T=Z.orderPubKey,M=Z.cleanupIx,V=Z.setupIxs,g=T,Ke((function(e){return[].concat((0,s.Z)(e),[{publicKey:g,account:{oriMakingAmount:l,makingAmount:l,takingAmount:f,oriTakingAmount:f,inputMint:new x.PublicKey(t.fromPair),outputMint:new x.PublicKey(t.toPair),expiredAt:b,createdAt:Date.now()/1e3}}])})),e.next=21,v.getLatestBlockhash("confirmed");case 21:return S=e.sent,F=S.blockhash,H=S.lastValidBlockHeight,_=(P=new x.Transaction({feePayer:n.adapter.publicKey,blockhash:F,lastValidBlockHeight:H})).add.apply(P,(0,s.Z)(V).concat([I])),M&&_.add(M),e.next=28,Le(_,{blockhash:F,lastValidBlockHeight:H,idl:m.xO,idlProgramId:m.Rn,skipPreflight:!0},{successMessage:(0,O.jsx)(u.cC,{id:"59vVOD",values:{0:new j.Z(t.fromPairValue).toDP(2).toString(),1:G.symbol,2:new j.Z(t.toPairValue).toDP(J.decimals).toString(),3:J.symbol}}),submittingMessage:(0,O.jsx)(u.cC,{id:"Mt9bSF"}),errorMessage:d.ag._({id:"ciaz0q"}),referenceFee:"MEDIUM"===Re?qe.lo.m:"HIGH"===Re?qe.lo.h:"VERY_HIGH"===Re?qe.lo.vh:void 0,minimumFee:B.uo,requestComputeBudgetLimit:3e5});case 28:if(K=e.sent,K.success){e.next=32;break}throw new Error("Failed to create order");case 32:e.next=38;break;case 34:e.prev=34,e.t0=e.catch(7),console.error(e.t0),Ke((function(e){return e.filter((function(e){return e.publicKey.toBase58()!==g.toBase58()}))}));case 38:return e.prev=38,setTimeout((function(){ae()}),1e3),e.finish(38);case 41:case"end":return e.stop()}}),e,null,[[7,34,38,41]])})));return function(t){return e.apply(this,arguments)}}(),[De,n,r,i,G,J,ze,v,Le,Re,qe.lo.m,qe.lo.h,qe.lo.vh,ae]);(0,g.useEffect)((function(){Ke((function(e){return e.filter((function(e){return!Boolean(null===ie||void 0===ie?void 0:ie.find((function(t){return t.publicKey&&e.publicKey.equals(t.publicKey)})))}))}))}),[ie,Ke]);var Je=(0,g.useCallback)(function(){var e=(0,o.Z)(c().mark((function e(t,n){var r,i,s,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.cancelOrder({owner:t,orderPubKey:n});case 2:return r=e.sent,e.next=5,v.getLatestBlockhash("confirmed");case 5:return i=e.sent,s=i.blockhash,a=i.lastValidBlockHeight,r.feePayer=t,r.recentBlockhash=s,r.lastValidBlockHeight=a,e.next=13,Le(r,{blockhash:s,lastValidBlockHeight:a,idl:f.xO,idlProgramId:f.zy["mainnet-beta"],skipPreflight:!0},{successMessage:(0,O.jsx)(u.cC,{id:"X5SStN"}),submittingMessage:(0,O.jsx)(u.cC,{id:"W9i+Oo"}),errorMessage:(0,O.jsx)(u.cC,{id:"fcKIMP"}),referenceFee:"MEDIUM"===Re?qe.lo.m:"HIGH"===Re?qe.lo.h:"VERY_HIGH"===Re?qe.lo.vh:void 0});case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[v,Le,T,Re,qe.lo.h,qe.lo.m,qe.lo.vh]),Ye=(0,g.useCallback)(function(){var e=(0,o.Z)(c().mark((function e(t,n){var r,i,s,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===ie||void 0===ie?void 0:ie.find((function(e){return e.publicKey.equals(n)}))){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,m.v4({maker:t,order:r,inputTokenProgram:null===r||void 0===r?void 0:r.account.inputTokenProgram,connection:v});case 5:return i=e.sent,s=i.setupIx,a=i.cancelIx,e.abrupt("return",{setupIx:s,cancelIx:a});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[v,ie]),Xe=(0,g.useCallback)(function(){var e=(0,o.Z)(c().mark((function e(t,n){var r,i,s,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.getLatestBlockhash("confirmed");case 2:return r=e.sent,i=r.blockhash,s=r.lastValidBlockHeight,a=new x.Transaction({feePayer:t,blockhash:i,lastValidBlockHeight:s}),n.forEach((function(e){e.setupIx&&a.add(e.setupIx),a.add(e.cancelIx)})),e.next=9,Le(a,{blockhash:i,lastValidBlockHeight:s,idl:m.xO,idlProgramId:m.Rn,skipPreflight:!0},{successMessage:(0,O.jsx)(u.cC,{id:"X5SStN"}),submittingMessage:(0,O.jsx)(u.cC,{id:"W9i+Oo"}),errorMessage:(0,O.jsx)(u.cC,{id:"fcKIMP"}),referenceFee:"MEDIUM"===Re?qe.lo.m:"HIGH"===Re?qe.lo.h:"VERY_HIGH"===Re?qe.lo.vh:void 0});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[v,Le,Re,qe.lo.h,qe.lo.m,qe.lo.vh]),$e=(0,g.useCallback)(function(){var e=(0,o.Z)(c().mark((function e(t){var a,l,f,m,h,p,j,g,w,y,k,P,N,C,M,V,S,B,A,D,H,_;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="cancel-limit-order-toast",l=(0,O.jsx)(O.Fragment,{}),f=[],m=null===n||void 0===n?void 0:n.adapter.publicKey,n&&m&&r&&i&&ie&&0!==t.length){e.next=6;break}return e.abrupt("return");case 6:if(!(h=1===t.length?ie.find((function(e){return e.publicKey.equals(t[0])})):null)||!h.publicKey){e.next=32;break}if(e.prev=8,!("createdAt"in h.account)){e.next=20;break}return e.next=13,Ye(m,h.publicKey);case 13:if(p=e.sent){e.next=16;break}throw new Error("Failed to create to v2 cancel order instruction");case 16:return e.next=18,Xe(m,[p]);case 18:e.next=22;break;case 20:return e.next=22,Je(m,h.publicKey);case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(8),console.log(e.t0);case 27:return e.prev=27,ae(),e.finish(27);case 30:e.next=71;break;case 32:if(!(t.length>1)){e.next=71;break}return j=t.reduce((function(e,t){var n=null===ie||void 0===ie?void 0:ie.find((function(e){return e.publicKey.equals(t)}));return n?("createdAt"in n.account?e.ordersToCancelV2.push({order:n,orderPubkey:t}):e.ordersToCancelV1.push({order:n,orderPubkey:t}),e):e}),{ordersToCancelV1:[],ordersToCancelV2:[]}),g=j.ordersToCancelV1,w=j.ordersToCancelV2,y=(0,F.OZ)(g,Pe.TC),k=(0,F.OZ)(w,Pe.TC),e.next=38,Promise.all(y.map(function(){var e=(0,o.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.batchCancelOrder({owner:m,ordersPubKey:t.map((function(e){return e.orderPubkey}))});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 38:return P=e.sent,e.next=41,Promise.all(k.map(function(){var e=(0,o.Z)(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=(0,o.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye(m,t.orderPubkey);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return n=e.sent,r=n.filter(Boolean),i=new x.Transaction,r.forEach((function(e){e.setupIx&&i.add(e.setupIx),i.add(e.cancelIx)})),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 41:return N=e.sent.filter(Boolean),e.prev=42,C=[],e.next=46,v.getLatestBlockhash("confirmed");case 46:for(M=e.sent,V=M.blockhash,S=M.lastValidBlockHeight,B=0,A=[].concat((0,s.Z)(P),(0,s.Z)(N));B<A.length;B++)D=A[B],C.push(new x.Transaction({feePayer:n.adapter.publicKey,blockhash:V,lastValidBlockHeight:S}).add(D));return l=(0,O.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,O.jsx)(W.Z,{width:20,height:20}),(0,O.jsxs)("div",{className:"space-y-1",children:[(0,O.jsx)("p",{children:(0,O.jsx)(u.cC,{id:"5Xu+kY"})}),t.length>Pe.TC&&(0,O.jsx)("p",{children:(0,O.jsx)(u.cC,{id:"MoGSaM"})})]})]}),Z({id:a,duration:!1,render:function(e){return(0,O.jsx)(Q.ZJ,Be(Be({},e),{},{title:d.ag._({id:"fNEu19"}),description:l}))}}),e.next=54,i(C);case 54:return H=e.sent,e.next=57,Promise.all(H.map(function(){var e=(0,o.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.signature&&f.push(b().encode(t.signature)),e.next=3,(0,x.sendAndConfirmRawTransaction)(v,t.serialize(),{commitment:"confirmed"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 57:l=(0,O.jsx)("div",{children:(0,O.jsx)("p",{children:(0,O.jsx)(u.cC,{id:"bimrpA",values:{0:t.length}})})}),Z({duration:12e4,id:a,render:function(e){return(0,O.jsx)(Q.ZJ,Be(Be({},e),{},{title:d.ag._({id:"lpsuk2"}),description:(0,O.jsx)("div",{children:(0,O.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,O.jsx)(W.Z,{width:20,height:20}),(0,O.jsx)("div",{children:l})]})})}))},closeOnClick:!1}),Z({duration:5e3,id:a,title:d.ag._({id:"gU3bLp"}),description:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("p",{children:(0,O.jsx)(u.cC,{id:"yITjiD"})}),f.map((function(e,t){return(0,O.jsx)("p",{children:(0,O.jsx)(z.Z,{txid:e})},t)}))]}),closeOnClick:!1,variant:Q.Lb.SUCCESS}),e.next=68;break;case 62:e.prev=62,e.t1=e.catch(42),I(a),_=t.length>1?d.ag._({id:"EEA1e+"}):d.ag._({id:"ZpieFv"}),Z({duration:5e3,title:_,description:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("p",{children:e.t1.message}),f.map((function(e,t){return(0,O.jsx)("p",{children:(0,O.jsx)(z.Z,{txid:e})},t)}))]}),closeOnClick:!1,variant:Q.Lb.INFO}),console.error({err:e.t1});case 68:return e.prev=68,setTimeout((function(){ae()}),2e3),e.finish(68);case 71:case"end":return e.stop()}}),e,null,[[8,24,27,30],[42,62,68,71]])})));return function(t){return e.apply(this,arguments)}}(),[n,r,i,ie,Ye,Xe,Je,ae,T,Z,v,I]),et=(0,g.useMemo)((function(){return!ie||0===ie.length||"Order History"===X}),[X,ie]),tt=(0,g.useCallback)((function(){if(ie&&!et){var e=ie.map((function(e){return e.publicKey})).filter(Boolean);$e(e)}}),[et,ie,$e]),nt=(0,g.useCallback)((function(){ae(),me()}),[ae,me]),rt=(0,H.a)(["limit-order-fee-structure"],(0,o.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.JK(v);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{}),it=rt.data,st=rt.isLoading,at=(0,g.useState)({day:0,hour:0,minute:0}),ot=at[0],lt=at[1],ct=(0,g.useMemo)((function(){return[ot.day?"".concat(ot.day,"d"):"",ot.hour?"".concat(ot.hour,"h"):"",ot.minute?"".concat(ot.minute,"m"):""].join(" ")}),[ot]);return Ce&&ke?(0,O.jsx)("div",{className:"flex w-full flex-1 flex-col",children:(0,O.jsxs)("div",{className:"relative flex h-full flex-1 flex-col",children:[(0,O.jsx)("div",{className:"relative flex w-full justify-center",children:(0,O.jsxs)("div",{className:"flex w-full flex-col",children:[(0,O.jsx)("div",{className:"flex w-full flex-col justify-center rounded-2xl border-white/5 shadow-xl lg:flex-row",children:(0,O.jsx)(Ne,{fromPairTokenInfo:G,toPairTokenInfo:J,baseTokenInfo:Ce,quoteTokenInfo:ke,baseTokenPrice:Oe,quoteTokenPrice:Ze,baseAndQuoteTokenPriceFetched:Fe,rateDecimals:Ve,control:ve,isDisabled:De,onSubmit:be(Ge),watchAllFields:Ae,setValue:ge,formState:we,isLoadingDasQuery:Ue,tokenHaveTransferFee:We,customDateLabel:ct,setCustomDate:lt})}),(0,O.jsx)("div",{children:(0,O.jsx)(Ie,{rateDecimals:Ve,feeStructure:{data:it,isLoading:st},fromPairTokenInfo:G,toPairTokenInfo:J,targetPrice:Ae.targetPrice,expiry:Ae.expiry,customDateLabel:ct,fromPairValue:Ae.fromPairValue,toPairValue:Ae.toPairValue})})]})}),(0,L.mD)(e)&&e.container.leftContainerHistories&&e.container.leftContainerHistories.current&&(0,K.createPortal)((0,O.jsxs)(U.Z,{tabs:["Open Orders","Order History"],activeTab:X,setActiveTab:$,isLoading:se||fe,cancelAllOrderDisabled:et,cancelAllOrder:tt,refetch:nt,children:["Open Orders"===X?(0,O.jsx)(Te.Z,{orders:ce,cancelOrder:$e,ongoingSubmission:_e,loading:se,pageIndex:te,setPageIndex:ne,pageCount:oe}):null,"Order History"===X?(0,O.jsx)(Me.Z,{orders:(null===de||void 0===de?void 0:de.orders)||[],loading:fe,pageIndex:te,setPageIndex:ne,pageCount:xe}):null]}),e.container.leftContainerHistories.current),(0,L.mD)(e)&&e.container.bottomPageHistories&&e.container.bottomPageHistories.current&&(0,K.createPortal)((0,O.jsxs)(U.Z,{tabs:["Open Orders","Order History"],activeTab:X,setActiveTab:$,isLoading:se||fe,cancelAllOrderDisabled:et,cancelAllOrder:tt,refetch:nt,children:["Open Orders"===X?(0,O.jsx)(Te.Z,{orders:ce,cancelOrder:$e,ongoingSubmission:_e,loading:se,pageIndex:te,setPageIndex:ne,pageCount:oe}):null,"Order History"===X?(0,O.jsx)(Me.Z,{orders:(null===de||void 0===de?void 0:de.orders)||[],loading:fe,pageIndex:te,setPageIndex:ne,pageCount:xe}):null]}),e.container.bottomPageHistories.current)]})}):null},De=function(){return(0,O.jsx)(Ve.ZP,{children:(0,O.jsx)(Ae,{})})},He=!0,_e=function(){return(0,O.jsxs)(V,{children:[(0,O.jsx)(r.PB,{title:"Limit Order"}),(0,O.jsx)(De,{})]})}},60569:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/limit/[inOut]",function(){return n(34522)}])},63989:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})}},function(e){e.O(0,[13215,69711,7842,59536,67161,46404,49774,92888,40179],(function(){return t=60569,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=[inOut]-e08a2b0815267fff.js.map